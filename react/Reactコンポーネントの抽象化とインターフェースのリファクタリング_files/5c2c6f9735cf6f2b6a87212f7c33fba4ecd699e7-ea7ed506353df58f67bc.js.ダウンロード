(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6874],{75071:function(e,t,n){"use strict";n.d(t,{q:function(){return _}});var r=n(67294),i=n(86010),o=n(76567),u=n.n(o),c=n(96156),l=n(2804),a=n(70901),s=n(24161),f=n(22072);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e){const[t,n]=(0,l.FV)(a.yk),{openModalLogin:i}=(0,s.X)(),{0:o,1:u}=(0,r.useState)(void 0);return(0,r.useEffect)((()=>{void 0!==t&&(t?function(){if(!t)return;if(t.id===e.id)return;const n=t.followingUserIds.indexOf(e.id)>=0;u(n)}():u(!1))}),[t]),{following:o,handleFollowButtonClick:async function(){t?o?async function(){try{(0,f.VR)({type:"User",targetItemId:e.id}),u(!1),function(e){if(!t)return;const r=t.followingUserIds.filter((t=>t!==e));n(k(k({},t),{},{followingUserIds:r}))}(e.id)}catch(r){alert("\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f"),console.log(r)}}():async function(){try{(0,f.zB)({type:"User",targetItemId:e.id}),u(!0),function(e){if(!t)return;const r=[...t.followingUserIds,e];n(k(k({},t),{},{followingUserIds:r}))}(e.id)}catch(r){alert("\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f"),console.log(r)}}():i()}}}var g=r.createElement;const _=({targetUser:e,styleSmall:t})=>{const{following:n,handleFollowButtonClick:o}=p(e);return void 0===n?null:g("button",{onClick:o,className:(0,i.Z)(u().button,"btn",{"style-following":n},{"style-small":t})},n?g(r.Fragment,null,g("div",{className:u().checkmark}),"Following"):g(r.Fragment,null,g("span",{className:u().plus},"+")," Follow"))}},62476:function(e,t,n){"use strict";n.d(t,{v:function(){return k},c:function(){return p}});var r=n(67294),i=n(86010),o=n(2804),u=n(78431),c=n.n(u),l=n(240),a=n(24161),s=n(70901),f=r.createElement;const d=(0,r.memo)((e=>{const{0:t,1:n}=(0,r.useState)(!1),u=(0,o._8)((({snapshot:e})=>async()=>!!(await e.getPromise(s.yk)))),{openModalLogin:l}=(0,a.X)();return f("div",{className:(0,i.Z)(c().container,"fade-in",{"style-large":e.styleLarge||e.styleLargeVertical},{"style-vertical":e.styleLargeVertical},{"anim-enabled":t}),onClick:async()=>{if(!(await u()))return void l();const t=!e.userLiked;n(!0),e.handleUpdateLike(t)}},f("button",{className:e.userLiked?c().buttonActive:c().button,"aria-label":"\u3044\u3044\u306d"},f(g,null)),!!e.likedCount&&f("span",{className:c().likedCount},e.likedCount))})),k=({styleLarge:e,styleLargeVertical:t,likableType:n,likableId:r})=>{const{like:i,updateLike:o}=(0,l.YU)({likableType:n,likableId:r}),u=null===i||void 0===i?void 0:i.currentUserLiked,c=null===i||void 0===i?void 0:i.likedCount;return void 0===u?null:f(d,{styleLarge:!!e,styleLargeVertical:!!t,userLiked:u,likedCount:c,handleUpdateLike:async function(e){try{await o(e)}catch(t){alert("\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f")}}})},p=({likableId:e,likableType:t,styleLarge:i,styleLargeVertical:o,initialUserLiked:u,initialLikedCount:c})=>{const{0:l,1:a}=(0,r.useState)(u),s=(0,r.useMemo)((()=>u&&!l?c-1:!u&&l?c+1:c),[l]);return f(d,{styleLarge:!!i,styleLargeVertical:!!o,userLiked:l,likedCount:s,handleUpdateLike:async function(r){a(r);const{postLike:i}=await n.e(2709).then(n.bind(n,92709));try{await i({liked:r,likableId:e,likableType:t})}catch(o){alert("\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f"),a(!r)}}})};function g(){return f("svg",{viewBox:"0 0 110 110",className:c().svgLike},f("path",{className:c().svgLikeLine,d:"M73,24a23.78,23.78,0,0,0-15.89,6.19,3.14,3.14,0,0,1-4.18,0A23.81,23.81,0,0,0,37,24a22,22,0,0,0-22,22c0,16.67,19.64,32.82,25.11,37.93,2.84,2.65,6.15,5.64,8.92,8.13a8.9,8.9,0,0,0,11.9,0c2.77-2.49,6.07-5.48,8.91-8.13C75.37,78.81,95,62.66,95,46A22,22,0,0,0,73,24Z",fill:"currentColor"}),f("path",{className:c().svgLikeInner,fill:"currentColor",d:"M66.25,76.42c-.71.64-1.32,1.2-1.82,1.67-2.51,2.33-5.39,5-7.94,7.25a2.21,2.21,0,0,1-3,0C51,83,48.1,80.42,45.59,78.09c-.5-.47-1.12-1-1.82-1.67C38.09,71.29,23,57.67,23,46A14,14,0,0,1,37,32a15.92,15.92,0,0,1,11.65,5.23l4.73,5a2.2,2.2,0,0,0,3.23,0l4.72-5A16.06,16.06,0,0,1,73,32,14,14,0,0,1,87,46C87,57.67,71.93,71.29,66.25,76.42Z"}),f("g",{className:c().svgLikeDecoration},f("circle",{cx:"41.5",cy:"9.5",r:"3.5",fill:"#3ea8ff"}),f("circle",{cx:"98.5",cy:"26.5",r:"3.5",fill:"#ffdc6e"}),f("circle",{cx:"13",cy:"19",r:"5",fill:"#c067f4"}),f("circle",{cx:"77",cy:"9",r:"5",fill:"#f76685"}),f("circle",{cx:"26.5",cy:"92.5",r:"3.5",fill:"#f76685"}),f("circle",{cx:"105.5",cy:"48.5",r:"3.5",fill:"#c067f4"}),f("circle",{cx:"4.5",cy:"60.5",r:"3.5",fill:"#3ea8ff"}),f("circle",{cx:"94.5",cy:"73.5",r:"1.5",fill:"#3ea8ff"}),f("circle",{cx:"16.5",cy:"75.5",r:"1.5",fill:"#ffdc6e"}),f("circle",{cx:"78.5",cy:"91.5",r:"1.5",fill:"#ffdc6e"})))}},22072:function(e,t,n){"use strict";n.d(t,{zB:function(){return i},VR:function(){return o},dX:function(){return u},QO:function(){return c},KJ:function(){return l}});var r=n(42083);async function i({targetItemId:e,type:t}){const{data:n}=await r.Axios.post("/follow",{followable_type:t,followable_id:e},{withCredentials:!0});return n}async function o({targetItemId:e,type:t}){const{data:n}=await r.Axios.delete("/follow",{params:{followable_type:t,followable_id:e},withCredentials:!0});return n}async function u({username:e,page:t}){const{data:n}=await r.Axios.get(`/users/${e}/followers`,{params:{page:t}});return n}async function c({username:e,page:t}){const{data:n}=await r.Axios.get(`/users/${e}/followings/users`,{params:{page:t}});return n}async function l({page:e}){const{data:t}=await r.Axios.get("/me/following_user_posts",{params:{page:e},withCredentials:!0});return t}},15593:function(e,t,n){"use strict";n.d(t,{k:function(){return i}});var r=n(67294);function i(e){const{0:t,1:n}=(0,r.useState)(!!e);return[t,(0,r.useCallback)((()=>{n(!0)}),[]),(0,r.useCallback)((()=>{n(!1)}),[])]}},240:function(e,t,n){"use strict";n.d(t,{ev:function(){return s},YU:function(){return f}});var r=n(96156),i=n(67294),o=n(2804),u=n(85101),c=n(70901);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s({likableType:e,likableId:t,initialLikedCount:r,initialUserLiked:l}){const[a,s]=(0,o.FV)(c.YB),{isLoggedIn:f,authChecked:d}=(0,u.x)();function k(n){s([...a,{likableType:e,likableId:t,likedCount:r,currentUserLiked:n}])}(0,i.useEffect)((()=>{if(!!a.find((n=>n.likableId===t&&n.likableType===e)))return;if(void 0!==l)return void k(l);if(!d)return;if(!f)return void k(!1);let r=!1;return async function(){if(!r)try{const{getUserLiked:r}=await n.e(2709).then(n.bind(n,92709));k((await r({likableId:t,likableType:e})).liked)}catch(i){console.log(i)}}(),()=>{r=!0}}),[t,d])}function f({likableType:e,likableId:t}){const[r,u]=(0,o.FV)(c.YB),l=(0,i.useMemo)((()=>r.findIndex((n=>n.likableId===t&&n.likableType===e))),[r]),s=l<0?null:r[l];return{like:s?{likedCount:s.likedCount,currentUserLiked:s.currentUserLiked}:null,updateLike:async function(i){if(!s)return alert("Like\u30dc\u30bf\u30f3\u304c\u521d\u671f\u5316\u3055\u308c\u3066\u3044\u307e\u305b\u3093");const{postLike:o}=await n.e(2709).then(n.bind(n,92709));await o({liked:i,likableId:t,likableType:e});const c=[...r];c[l]=a(a({},s),{},{currentUserLiked:i,likedCount:i?s.likedCount+1:s.likedCount-1}),u(c)}}}},24161:function(e,t,n){"use strict";n.d(t,{X:function(){return u}});var r=n(67294),i=n(2804),o=n(70901);function u(){const e=(0,i.Zl)(o.gU);return{openModalLogin:(0,r.useCallback)((()=>e(!0)),[]),closeModalLogin:(0,r.useCallback)((()=>e(!1)),[])}}},98881:function(e,t,n){"use strict";function r({username:e,slug:t,isPreview:n}){return n?`/articles/${t}/preview`:`/${e}/articles/${t}`}function i({slug:e}){return`/articles/${e}/edit`}function o({username:e,slug:t,isPreview:n}){return n?`/books/${t}/preview`:`/${e}/books/${t}`}function u({slug:e}){return`/books/${e}/edit`}function c({id:e}){return`/chapters/${e}/edit`}function l({username:e,slug:t,chapterSlug:n}){return`/${e}/books/${t}/viewer${n?`/${n}`:""}`}function a({commentSlug:e}){return`comment-${e}`}function s({slug:e}){return`/link/comments/${e}`}function f({slug:e}){return`/link/books/${e}`}function d({itemType:e,slug:t,username:n}){return"Article"===e?r({slug:t,username:n}):"Book"===e?o({slug:t,username:n}):"Comment"===e?s({slug:t}):"Scrap"===e?y({slug:t,username:n}):(console.error("no path found"),"/")}function k({username:e}){return`/${e}`}function p({name:e}){return`/topics/${encodeURIComponent(e)}`}function g({name:e}){return p({name:e})+"/books"}function _({name:e}){return p({name:e})+"/scraps"}function m({name:e}){return`/topics/${encodeURIComponent(e)}/edit`}function y({slug:e,username:t}){return`/${t}/scraps/${e}`}function b({slug:e}){return`https://api.zenn.dev/scraps/${e}/markdown`}function w({username:e}){return`/${e}/scraps`}function L({username:e}){return k({username:e})}function v({username:e}){return`/${e}/books`}function C({username:e}){return`/${e}/comments`}n.d(t,{G3:function(){return r},lU:function(){return i},an:function(){return o},xM:function(){return u},mK:function(){return c},rm:function(){return l},rG:function(){return a},lW:function(){return s},Dj:function(){return f},W9:function(){return d},zH:function(){return k},_Z:function(){return p},Nz:function(){return g},ub:function(){return _},mz:function(){return m},RD:function(){return y},_I:function(){return b},CW:function(){return w},Eg:function(){return L},Vw:function(){return v},Iu:function(){return C}})},76567:function(e){e.exports={button:"ButtonFollow_button__1WG_M",checkmark:"ButtonFollow_checkmark__C3XwF",plus:"ButtonFollow_plus__1h_EN"}},78431:function(e){e.exports={container:"LikeButton_container__1Kk9g",buttonActive:"LikeButton_buttonActive__257FG LikeButton_button__2ejjq",svgLike:"LikeButton_svgLike__3nz-n",pulse:"LikeButton_pulse__23Cd8",svgLikeDecoration:"LikeButton_svgLikeDecoration__3NxRG",explode:"LikeButton_explode__1JyF1",button:"LikeButton_button__2ejjq",likedCount:"LikeButton_likedCount__1h6p9",svgLikeLine:"LikeButton_svgLikeLine__2RPCE",svgLikeInner:"LikeButton_svgLikeInner__DUGle"}},11131:function(e){e.exports={__common__:"wrapper___common____1jPt-",default:"wrapper_default__2g3rf wrapper___common____1jPt-",wide:"wrapper_wide__2M6Jp wrapper___common____1jPt-",full:"wrapper_full__1WuFf wrapper___common____1jPt-"}}}]);