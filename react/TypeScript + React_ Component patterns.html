<!DOCTYPE html>
<!-- saved from url=(0056)https://fettblog.eu/typescript-react-component-patterns/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>TypeScript + React: Component patterns</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="theme-color" content="dodgerblue">
<meta name="description" content="Articles on web dev and software engineering: TypeScript, JavaScript, Rust, and more!">
<meta name="keywords" content="Web, Web Ops, DevOps, Performance, Front-End, JavaScript, CSS">

<link rel="stylesheet" href="./TypeScript + React_ Component patterns_files/main.css">
<link rel="stylesheet" href="./TypeScript + React_ Component patterns_files/css2">

<link rel="alternate" type="application/rss+xml" title="front-end technology talk Â» Updates" href="https://fettblog.eu/feed.xml">

<link rel="pingback" href="https://webmention.io/fettblog.eu/xmlrpc">
<link rel="webmention" href="https://webmention.io/fettblog.eu/webmention">
<link rel="apple-touch-icon" sizes="57x57" href="https://fettblog.eu/icon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="https://fettblog.eu/icon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://fettblog.eu/icon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="https://fettblog.eu/icon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://fettblog.eu/icon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://fettblog.eu/icon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="https://fettblog.eu/icon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="https://fettblog.eu/icon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://fettblog.eu/icon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192" href="https://fettblog.eu/icon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://fettblog.eu/icon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="https://fettblog.eu/icon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://fettblog.eu/icon/favicon-16x16.png">
<link rel="manifest" href="https://fettblog.eu/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/icon/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">
<link rel="canonical" href="https://fettblog.eu/typescript-react-component-patterns/">
<link rel="preconnect" href="https://srv.carbonads.net/">
<link rel="preconnect" href="https://cdn4.buysellads.net/">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="TypeScript + React: Component patterns">
<meta name="twitter:creator" content="@ddprrt">
<meta property="og:image" content="https://fettblog.eu/teasers/typescript-react-component-patterns.png">
<meta property="og:image:secure_url" content="https://fettblog.eu/teasers/typescript-react-component-patterns.png">
<meta name="twitter:image" content="https://fettblog.eu/teasers/typescript-react-component-patterns.png">
<script id="_carbonads_projs" type="text/javascript" src="./TypeScript + React_ Component patterns_files/CE7DT2JM.json"></script></head>
<body>


<article class="wrapper h-entry">
<div class="bg">
<div class="preamble main-frame">

<h1>TypeScript + React: Component patterns</h1>

</div>
</div>
<div class="grid main-frame article">
<div class="happy-stefan">
<script async="" type="text/javascript" src="./TypeScript + React_ Component patterns_files/carbon.js.ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰" id="_carbonads_js"></script><div id="carbonads"><span><span class="carbon-wrap"><a href="https://srv.carbonads.net/ads/click/x/GTND42JJC6YI62JWFTYLYKQNC6YD5K3LCV7DKZ3JCYYIT2JYF6YIC5QKFTBI5K3WCKBIL2JEC6SD5KJECYSICK3KC6SD4KQJCTYDEK3EHJNCLSIZ?segment=placement:fettblogeu;" class="carbon-img" target="_blank" rel="noopener sponsored"><img src="./TypeScript + React_ Component patterns_files/1551199042-Adobe_Stock_260x200-3.jpg" alt="ads via Carbon" border="0" style="max-width: 130px;"></a><a href="https://srv.carbonads.net/ads/click/x/GTND42JJC6YI62JWFTYLYKQNC6YD5K3LCV7DKZ3JCYYIT2JYF6YIC5QKFTBI5K3WCKBIL2JEC6SD5KJECYSICK3KC6SD4KQJCTYDEK3EHJNCLSIZ?segment=placement:fettblogeu;" class="carbon-text" target="_blank" rel="noopener sponsored">Limited time offer: Get 10 free Adobe Stock images.</a></span><a href="http://carbonads.net/?utm_source=fettblogeu&amp;utm_medium=ad_via_link&amp;utm_campaign=in_unit&amp;utm_term=carbon" class="carbon-poweredby" target="_blank" rel="noopener sponsored">ads via Carbon</a></span></div>
</div>
<div class="e-content">
<p>This list is a collection of component patterns for React when working with TypeScript. See them as an extension to the <a href="https://fettblog.eu/typescript-react/">TypeScript + React Guide</a> that deals with overall concepts and types. This list has been heavily inspired by <a href="https://reactpatterns.com/">chantasticâ€™s original React patterns list</a>.</p>
<p>Contrary to chantasticâ€™s guide I use mainly modern-day React, so function components and â€“ if necessary â€“ hooks. I also focus exclusively on types.</p>
<p><strong>Last updated</strong>: July 30, 2020</p>
<p>Have fun!</p>
<h2 id="table-of-contents">Table of Contents <a class="direct-link" href="https://fettblog.eu/typescript-react-component-patterns/#table-of-contents">#</a></h2>
<ul>
<li><a href="https://fettblog.eu/typescript-react-component-patterns/#basic-function-components">Basic function components</a></li>
<li><a href="https://fettblog.eu/typescript-react-component-patterns/#props">Props</a></li>
<li><a href="https://fettblog.eu/typescript-react-component-patterns/#default-props">Default Props</a></li>
<li><a href="https://fettblog.eu/typescript-react-component-patterns/#children">Children</a></li>
<li><a href="https://fettblog.eu/typescript-react-component-patterns/#withchildren-helper-type">WithChildren Helper type</a></li>
<li><a href="https://fettblog.eu/typescript-react-component-patterns/#spread-attributes-to-html-elements">Spread attributes</a></li>
<li><a href="https://fettblog.eu/typescript-react-component-patterns/#preset-attributes">Preset attributes</a></li>
<li><a href="https://fettblog.eu/typescript-react-component-patterns/#styled-components">Styled components</a></li>
<li><a href="https://fettblog.eu/typescript-react-component-patterns/#required-properties">Required properties</a></li>
<li><a href="https://fettblog.eu/typescript-react-component-patterns/#controlled-input">Controlled input</a></li>
</ul>
<h2 id="basic-function-components">Basic function components <a class="direct-link" href="https://fettblog.eu/typescript-react-component-patterns/#basic-function-components">#</a></h2>
<p>When using function components without any props you donâ€™t have the need to use extra types. Everything can be inferred. In old-style functions (which I prefer), as well as in arrow functions.</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">Title</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Welcome to <span class="token keyword">this</span> application<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h2 id="props">Props <a class="direct-link" href="https://fettblog.eu/typescript-react-component-patterns/#props">#</a></h2>
<p>When using props we name props usually according to the component weâ€™re writing, with a <code>Props</code>-suffix. No need to use <code>FC</code> component wrappers or anything similar.</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">GreetingProps</span> <span class="token operator">=</span> <span class="token punctuation">{</span><br>  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">Greeting</span><span class="token punctuation">(</span>props<span class="token operator">:</span> GreetingProps<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Hi <span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span> ðŸ‘‹<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><br><span class="token punctuation">}</span></code></pre>
<p>Destructuring makes it even more readable</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name <span class="token punctuation">}</span><span class="token operator">:</span> GreetingProps<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Hi <span class="token punctuation">{</span>name<span class="token punctuation">}</span> ðŸ‘‹<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h2 id="default-props">Default props <a class="direct-link" href="https://fettblog.eu/typescript-react-component-patterns/#default-props">#</a></h2>
<p>Instead of setting default props, like in class-based React, itâ€™s easier to set default values to props. We mark props with a default value optional (see the question-mark operator). The default value makes sure that <code>name</code> is never undefined.</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">LoginMsgProps</span> <span class="token operator">=</span> <span class="token punctuation">{</span><br>  name<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">LoginMsg</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name <span class="token operator">=</span> <span class="token string">"Guest"</span> <span class="token punctuation">}</span><span class="token operator">:</span> LoginMsgProps<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Logged <span class="token keyword">in</span> <span class="token keyword">as</span> <span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h2 id="children">Children <a class="direct-link" href="https://fettblog.eu/typescript-react-component-patterns/#children">#</a></h2>
<p>Instead of using <code>FC</code> or <code>FunctionComponent</code> helpers we prefer to set <code>children</code> explicitly, so it follows the same pattern as other components. We set <code>children</code> to type <code>React.ReactNode</code> as it accepts most (JSX elements, strings, etc.)</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">CardProps</span> <span class="token operator">=</span> <span class="token punctuation">{</span><br>  title<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span><br>  children<span class="token operator">:</span> React<span class="token punctuation">.</span>ReactNode<span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">Card</span><span class="token punctuation">(</span><span class="token punctuation">{</span> title<span class="token punctuation">,</span> children <span class="token punctuation">}</span><span class="token operator">:</span> CardProps<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token punctuation">(</span><br>    <span class="token operator">&lt;</span>section className<span class="token operator">=</span><span class="token string">"cards"</span><span class="token operator">&gt;</span><br>      <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span><br>      <span class="token punctuation">{</span>children<span class="token punctuation">}</span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>section<span class="token operator">&gt;</span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>When we set <code>children</code> explicitly, we can also make sure that we <em>never</em> pass any children.</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token comment">// This throws errors when we pass children</span><br><span class="token keyword">type</span> <span class="token class-name">SaveButtonProps</span> <span class="token operator">=</span> <span class="token punctuation">{</span><br>  <span class="token comment">//... whatever</span><br>  children<span class="token operator">:</span> <span class="token builtin">never</span><br><span class="token punctuation">}</span></code></pre>
<p>See my arguments why I donâ€™t use <code>FC</code> <a href="https://fettblog.eu/typescript-react-why-i-dont-use-react-fc/">in this editoral</a>.</p>
<h2 id="withchildren-helper-type">WithChildren helper type <a class="direct-link" href="https://fettblog.eu/typescript-react-component-patterns/#withchildren-helper-type">#</a></h2>
<p>A custom helper type helps us to set <code>children</code> easier.</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">WithChildren<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <br>  <span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span> children<span class="token operator">?</span><span class="token operator">:</span> React<span class="token punctuation">.</span>ReactNode <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token keyword">type</span> <span class="token class-name">CardProps</span> <span class="token operator">=</span> WithChildren<span class="token operator">&lt;</span><span class="token punctuation">{</span><br>  title<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">;</span></code></pre>
<p>This is very similar to <code>FC</code>, but with the default generic parameter to <code>{}</code>, it can be much more flexible:</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token comment">// works as well</span><br><span class="token keyword">type</span> <span class="token class-name">CardProps</span> <span class="token operator">=</span> <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span> <span class="token operator">&amp;</span> WithChildren<span class="token punctuation">;</span></code></pre>
<p>If you are using Preact, you can use <code>h.JSX.Element</code> or <code>VNode</code> as a type instead of <code>React.ReactNode</code>.</p>
<h2 id="spread-attributes-to-html-elements">Spread attributes to HTML elements <a class="direct-link" href="https://fettblog.eu/typescript-react-component-patterns/#spread-attributes-to-html-elements">#</a></h2>
<p>Spreading attributes to HTML elements is a nice feature where you can make sure that you are able to set all the HTML properties that an element has without knowing upfront which you want to set. You pass them along. Hereâ€™s a button wrapping component where we spread attributes. To get the right attributes, we access a <code>button</code>'s props through <code>JSX.IntrinsicElements</code>. This includes <code>children</code>, we spread them along.</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">ButtonProps</span> <span class="token operator">=</span> <span class="token constant">JSX</span><span class="token punctuation">.</span>IntrinsicElements<span class="token punctuation">[</span><span class="token string">"button"</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">Button</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>allProps <span class="token punctuation">}</span><span class="token operator">:</span> ButtonProps<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>button <span class="token punctuation">{</span><span class="token operator">...</span>allProps<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h2 id="preset-attributes">Preset attributes <a class="direct-link" href="https://fettblog.eu/typescript-react-component-patterns/#preset-attributes">#</a></h2>
<p>Letâ€™s say we want to preset <code>type</code> to <code>button</code> as the default behavior <code>submit</code> tries to send a form, and we just want to have things clickable. We can get type safety by omitting <code>type</code> from the set of button props.</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">ButtonProps</span> <span class="token operator">=</span><br>  Omit<span class="token operator">&lt;</span><span class="token constant">JSX</span><span class="token punctuation">.</span>IntrinsicElements<span class="token punctuation">[</span><span class="token string">"button"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"type"</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">Button</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>allProps <span class="token punctuation">}</span><span class="token operator">:</span> ButtonProps<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>button <span class="token keyword">type</span><span class="token operator">=</span><span class="token string">"button"</span> <span class="token punctuation">{</span><span class="token operator">...</span>allProps<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// ðŸ’¥ This breaks, as we omitted type</span><br><span class="token class-name"><span class="token keyword">const</span></span> z <span class="token operator">=</span> <span class="token operator">&lt;</span>Button <span class="token keyword">type</span><span class="token operator">=</span><span class="token string">"button"</span><span class="token operator">&gt;</span>Hi<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span><span class="token punctuation">;</span> </code></pre>
<h2 id="styled-components">Styled components <a class="direct-link" href="https://fettblog.eu/typescript-react-component-patterns/#styled-components">#</a></h2>
<p>Not to be confused with the <em>styled-components</em> CSS-in-JS library. We want to set CSS classes based on a prop we define. E.g. a new <code>type</code> property that allows being set to either <code>primary</code> or <code>secondary</code>.</p>
<p>We omit the original <code>type</code> and <code>className</code> and intersect with our own types:</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">StyledButton</span> <span class="token operator">=</span> Omit<span class="token operator">&lt;</span><br>  <span class="token constant">JSX</span><span class="token punctuation">.</span>IntrinsicElements<span class="token punctuation">[</span><span class="token string">"button"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token string">"type"</span> <span class="token operator">|</span> <span class="token string">"className"</span><br><span class="token operator">&gt;</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span><br>  <span class="token keyword">type</span><span class="token operator">:</span> <span class="token string">"primary"</span> <span class="token operator">|</span> <span class="token string">"secondary"</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">StyledButton</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token keyword">type</span><span class="token punctuation">,</span> <span class="token operator">...</span>allProps <span class="token punctuation">}</span><span class="token operator">:</span> StyledButton<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>Button className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">btn-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">type</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h2 id="required-properties">Required properties <a class="direct-link" href="https://fettblog.eu/typescript-react-component-patterns/#required-properties">#</a></h2>
<p>We dropped some props from the type definition and preset them to sensible defaults. Now we want to make sure our users donâ€™t forget to set some props. Like the alt attribute of an image or the <code>src</code> attribute.</p>
<p>For that, we create a <code>MakeRequired</code> helper type that removes the optional flag.</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">MakeRequired<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> Omit<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">&gt;</span> <span class="token operator">&amp;</span><br>  Required<span class="token operator">&lt;</span><span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">;</span></code></pre>
<p>And build our props with that:</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">ImgProps</span> <br>  <span class="token operator">=</span> MakeRequired<span class="token operator">&lt;</span><br>    <span class="token constant">JSX</span><span class="token punctuation">.</span>IntrinsicElements<span class="token punctuation">[</span><span class="token string">"img"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <br>    <span class="token string">"alt"</span> <span class="token operator">|</span> <span class="token string">"src"</span><br>  <span class="token operator">&gt;</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">Img</span><span class="token punctuation">(</span><span class="token punctuation">{</span> alt<span class="token punctuation">,</span> <span class="token operator">...</span>allProps <span class="token punctuation">}</span><span class="token operator">:</span> ImgProps<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>img alt<span class="token operator">=</span><span class="token punctuation">{</span>alt<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">...</span>allProps<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">const</span> zz <span class="token operator">=</span> <span class="token operator">&lt;</span>Img alt<span class="token operator">=</span><span class="token string">"..."</span> src<span class="token operator">=</span><span class="token string">"..."</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span></code></pre>
<h2 id="controlled-input">Controlled Input <a class="direct-link" href="https://fettblog.eu/typescript-react-component-patterns/#controlled-input">#</a></h2>
<p>When you use regular input elements in React and want to pre-fill them with values, you canâ€™t change them anymore afterward. This is because the <code>value</code> property is now controlled by React. We have to put <code>value</code> in our state and <em>control</em> it. Usually, itâ€™s enough to just intersect the original input elementâ€™s props with our own type. Itâ€™s optional as we want to set it to a default empty string in the component later on.</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">ControlledProps</span> <span class="token operator">=</span> <br>  <span class="token constant">JSX</span><span class="token punctuation">.</span>IntrinsicElements<span class="token punctuation">[</span><span class="token string">"input"</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span><br>    value<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>Alternatively, we can drop the old property and rewrite it:</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">ControlledProps</span> <span class="token operator">=</span><br>  Omit<span class="token operator">&lt;</span><span class="token constant">JSX</span><span class="token punctuation">.</span>IntrinsicElements<span class="token punctuation">[</span><span class="token string">"input"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"value"</span><span class="token operator">&gt;</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span><br>    value<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>And use <code>useState</code> with default values to make it work. We also forward the <code>onChange</code> handler we pass from the original input props.</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">Controlled</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  value <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span> onChange<span class="token punctuation">,</span> <span class="token operator">...</span>allProps<br><span class="token punctuation">}</span><span class="token operator">:</span> ControlledProps<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> <span class="token punctuation">[</span>val<span class="token punctuation">,</span> setVal<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> <span class="token punctuation">(</span><br>    <span class="token operator">&lt;</span>input<br>      value<span class="token operator">=</span><span class="token punctuation">{</span>val<span class="token punctuation">}</span><br>      <span class="token punctuation">{</span><span class="token operator">...</span>allProps<span class="token punctuation">}</span><br>      onChange<span class="token operator">=</span><span class="token punctuation">{</span>e <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br>        <span class="token function">setVal</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> e<span class="token punctuation">.</span>target<span class="token operator">?.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        onChange <span class="token operator">&amp;&amp;</span> <span class="token function">onChange</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><span class="token punctuation">}</span><br>    <span class="token operator">/</span><span class="token operator">&gt;</span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p><em>to be extended</em></p>
<h2 id="play-around">Play around <a class="direct-link" href="https://fettblog.eu/typescript-react-component-patterns/#play-around">#</a></h2>
<p>Instead of the usual TypeScript playground, I created a <a href="https://codesandbox.io/s/component-patterns-sw7x9?file=/src/Components.tsx">Codesandbox</a> you can use to play around. Have fun!</p>

</div>

</div>
</article>


</body></html>