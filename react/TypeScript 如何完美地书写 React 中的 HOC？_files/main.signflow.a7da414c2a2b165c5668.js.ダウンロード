(window.webpackJsonp=window.webpackJsonp||[]).push([[41,18],{1018:function(e,t,n){"use strict";var a=n(0),r=n(27),i=n(8),o=n(11),c=n(9),s=n(10),u=n(4),l=n(1),d=n(3),h=n.n(d),p=n(2),f=n(14),g=n.n(f),m=n(84),b=n.n(m),v=n(120),C=n(906);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var E=function(e){Object(c.a)(n,e);var t=A(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleErrorHide=function(){e.getValidationMessage()&&e.setState({errorMaskShown:!1},(function(){e.clearValidations({errorMaskShown:!0},(function(){return e.inputEl.focus()}))}))},e.handleKeyUp=function(t){8!==t.keyCode&&9!==t.keyCode||e.clearValidations()},e.handleChange=function(t){var n=t.target.value,a=e.props.onChange;e.setValue(n),"function"==typeof a&&a(n)},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.defaultValue;e&&this.setValue(e),this.setState({errorMaskShown:!0})}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.manualValidateError,a=t.type,r=t.smsType,i=e.manualValidateError,o=e.type,c=e.defaultValue,s=e.smsType;!n&&i||"string"==typeof n&&n!==i?this.addManualValidation(i):n&&!i&&this.clearValidations({errorMaskShown:!0}),a===o&&r===s||(this.setValue(c),this.clearValidations({errorMaskShown:!0}))}},{key:"render",value:function(){var e,t=this,n=b()(this.props,["validations","defaultValue","onChange","smsType","manualValidateError","dispatch"]),i=n.className,o=n.inputClassName,c=n.errorMessageClassName,s=Object(r.a)(n,["className","inputClassName","errorMessageClassName"]),u=(this.state||{}).errorMaskShown,d=this.getValue(),h=this.getValidationMessage();return Object(l.c)("div",{className:g()("SignFlowInput",i),children:[Object(l.b)(v.a,Object.assign({onRef:function(e){t.inputEl=e},value:d,onChange:this.handleChange,onKeyUp:this.handleKeyUp,onClick:this.handleErrorHide,onBlur:function(){return t.validate()},className:o},s)),Object(l.b)("div",{className:g()("SignFlowInput-errorMask",this.getValidationClassName(),(e={},Object(a.a)(e,c,h),Object(a.a)(e,"SignFlowInput-requiredErrorMask",!d),Object(a.a)(e,"SignFlowInput-errorMask--hidden",!h||!u),e)),onClick:this.handleErrorHide,children:h})]})}}]),n}(p.Component);E.propTypes={inputClassName:h.a.string,errorMessageClassName:h.a.string,manualValidateError:h.a.node};t.a=Object(C.a)()(E)},1061:function(e,t,n){"use strict";var a=n(2),r=n.n(a),i=n(17),o=function(e){return r.a.createElement(i.a,e,r.a.createElement("path",{d:"M14.782 16.78a.737.737 0 0 1-1.052 0L9.218 12.53a.758.758 0 0 1 0-1.063L13.73 7.22a.737.737 0 0 1 1.052 0c.29.294.29.77.001 1.063L11 12l3.782 3.716c.29.294.29.77 0 1.063z",fillRule:"evenodd"}))};o.defaultProps={name:"ArrowLeft"},t.a=o},1068:function(e,t,n){"use strict";var a=n(27),r=n(8),i=n(11),o=n(9),c=n(10),s=n(4),u=n(1),l=n(3),d=n.n(l),h=n(2),p=n(21),f=n(164),g=n(84),m=n.n(g),b=n(204),v=n(1018),C=n(24),A=n(777);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var r=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}h.Component;function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var r=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var w=function(e){Object(o.a)(n,e);var t=S(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={selectedCountry:null},e.handleSelect=function(t,n){var a=e.props,r=a.supportedCountries,i=a.onSelect,o=r[n];e.setState({selectedCountry:o}),i(o)},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.supportedCountries,n=e.getSupportedCountries;t&&t.length||n()}},{key:"render",value:function(){var e=m()(this.props,["getSupportedCountries","onSelect"]),t=e.supportedCountries,n=e.onChange,r=e.defaultPhoneNo,i=e.type,o=e.defaultSelectedCountry,c=e.supportedCountriesShown,s=e.placeholderPrefix,l=void 0===s?"":s,d=e.getPlaceholder,h=Object(a.a)(e,["supportedCountries","onChange","defaultPhoneNo","type","defaultSelectedCountry","supportedCountriesShown","placeholderPrefix","getPlaceholder"]),p=this.state.selectedCountry||o,g=p.name,b=p.code,C=Boolean(c&&t&&t.length);return Object(u.c)("div",{className:"SignFlow-account",children:[C&&Object(u.c)(u.a,{children:[Object(u.b)("div",{className:"SignFlow-supportedCountriesSelectContainer",children:Boolean(t)&&Boolean(t.length)&&Object(u.b)(f.b,{plain:!0,text:"".concat(g," ").concat(b),onChange:this.handleSelect,children:t.map((function(e,t){var n=e.name,a=e.code;return Object(u.b)(f.a,{value:"".concat(n," ").concat(a)},t)}))})}),Object(u.b)("span",{className:"SignFlow-accountSeperator",children:" "})]}),Object(u.b)(v.a,Object.assign({className:"SignFlow-accountInputContainer",name:"register"===i?"phoneNo":"username",inputClassName:"SignFlow-accountInput",placeholder:d(i,l),onChange:n,defaultValue:r,validations:[{type:"required",message:d(i,"请输入")}],type:"digits"===i||"register"===i?"tel":"text"},h))]})}}]),n}(h.Component);w.propTypes={defaultPhoneNo:d.a.string,defaultSelectedCountry:d.a.object,supportedCountries:d.a.array,onSelect:d.a.func,onChange:d.a.func,getSupportedCountries:d.a.func,type:d.a.oneOf(["register","digits","password"]).isRequired,supportedCountriesShown:d.a.bool,placeholderPrefix:d.a.string,getPlaceholder:d.a.func},w.defaultProps={defaultPhoneNo:"",defaultSelectedCountry:{name:"中国",code:"+86"},supportedCountriesShown:!0,getPlaceholder:function(e,t){var n="digits"===e||"register"===e?"手机号":"手机号或邮箱";return"".concat(t).concat(n)}};t.a=Object(p.connect)((function(e){return{supportedCountries:e.sms.supportedCountries}}),{getSupportedCountries:b.b})(w)},1091:function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var a=n(27),r=n(8),i=n(11),o=n(9),c=n(10),s=n(4),u=n(1),l=n(3),d=n.n(l),h=n(2),p=n(25),f=n(1257),g=n(1258),m=n(84),b=n.n(m),v=n(1018);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var r=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var A=function(e){Object(o.a)(n,e);var t=C(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleSwitchPasswordInputType=function(){a.setState((function(e){return{inputType:"password"===e.inputType?"text":"password"}}))},a.handleChange=function(e){a.state.hasValue!==Boolean(e)&&a.setState({hasValue:Boolean(e)}),a.props.onChange(e)},a.state={hasValue:Boolean(e.defaultValue),inputType:e.defaultType},a}return Object(i.a)(n,[{key:"render",value:function(){var e=b()(this.props,["onChange","defaultType"]),t=e.switchDisabled,n=e.placeholderPrefix,r=Object(a.a)(e,["switchDisabled","placeholderPrefix"]),i=this.state,o=i.inputType,c=i.hasValue;return Object(u.c)("div",{className:"SignFlow-password",children:[Object(u.b)(v.a,Object.assign({name:"password",inputClassName:"password"===o&&c?"SignFlow-passwordInput":"",type:o,placeholder:"".concat(n||"","密码"),onChange:this.handleChange,errorMessageClassName:"SignFlow-passwordErrorMask",validations:[{type:"required",message:"请输入密码",className:"SignFlow-requiredPasswordErrorMask"}]},r)),!t&&Object(u.b)(p.c,{className:"SignFlow-switchPassword",tabIndex:-1,preset:"plain",onClick:this.handleSwitchPasswordInputType,icon:"password"===o?f.a:g.a})]})}}]),n}(h.Component);A.propTypes={onChange:d.a.func.isRequired,switchDisabled:d.a.bool,defaultType:d.a.string},A.defaultProps={defaultType:"password"}},1092:function(e,t,n){"use strict";var a=n(27),r=n(8),i=n(11),o=n(9),c=n(10),s=n(4),u=n(1),l=n(3),d=n.n(l),h=n(2),p=n(1018);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var r=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var g=function(e){Object(o.a)(n,e);var t=f(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onChange,n=e.validations,r=Object(a.a)(e,["onChange","validations"]);return Object(u.b)(p.a,Object.assign({className:"SignFlow-username",onChange:t,validations:n||[{type:"required",message:"请输入用户名"}]},r))}}]),n}(h.Component);g.propTypes={onChange:d.a.func.isRequired};t.a=g},1215:function(e,t,n){"use strict";var a=n(8),r=n(11),i=n(9),o=n(10),c=n(4),s=n(1),u=n(3),l=n.n(u),d=n(2),h=n(21),p=n(112),f=n(5),g=n(14),m=n.n(g),b=n(776),v=n(25),C=n(1018),A=n(1343),E=n.n(A),S=n(1344),w=n.n(S);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var O=function(e){Object(i.a)(n,e);var t=y(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={hovered:!0},e.handleMouseEnter=function(){e.setState({hovered:!0})},e.handleMouseLeave=function(){e.setState({hovered:!1})},e}return Object(r.a)(n,[{key:"componentWillReceiveProps",value:function(e){this.props.position!==e.position&&this.handleMouseLeave()}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.position!==e.position||this.state.hovered!==t.hovered}},{key:"render",value:function(){var e=this.props,t=e.position,n=e.onUnMark,a=this.state.hovered,r=a?E.a:w.a;return Object(s.c)(v.c,{className:"ChineseCaptchaPoint",style:t,onClick:n,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,preset:"plain",children:[Object(s.b)(w.a,{className:m()("ChineseCaptchaPoint-backIcon",{"ChineseCaptchaPoint-backIcon--hovered":a}),fill:a?"#0f88eb":"#aad9ff",width:20,height:20}),Object(s.b)(r,{className:m()("ChineseCaptchaPoint-frontIcon",{"ChineseCaptchaPoint-frontIcon--hovered":a}),fill:a?"#ffffff":"#0f88eb",width:a?8:12,height:a?8:12})]})}}]),n}(d.Component);O.propTypes={onUnMark:l.a.func.isRequired,position:l.a.object.isRequired};var j=O;function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var B="最多只能选择 ".concat(7," 个点"),R=function(e){Object(i.a)(n,e);var t=I(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={markPositionsArray:[],isClient:!1},e.updateSize=function(){if(e.chineseCaptchaImg){var t=e.chineseCaptchaImg.getBoundingClientRect();e.chineseImgWidth=t.width,e.chineseImgHeight=t.height}},e.handleMarkPoint=function(t){if(e.chineseCaptchaImg){var n=e.state.markPositionsArray,a=e.props.onValidation;if(n.length>=7)a({validationMessage:B});else{var r=t.pageX,i=t.pageY;e.updateSize();var o=e.chineseCaptchaImg.getBoundingClientRect(),c=o.top,s=o.left,u=i-c-window.pageYOffset-10,l=r-s-window.pageXOffset-10,d=[].concat(Object(f.a)(n),[{top:u,left:l+60+16}]);e.updateMarkPoint(d)}}},e.handleUnMarkPoint=function(t){var n=Object(f.a)(e.state.markPositionsArray);n.splice(t,1),e.updateMarkPoint(n)},e.updateMarkPoint=function(t){e.setState({markPositionsArray:t},(function(){e.props.onUpdateInput(e.parseMarkPositionsArrayToInputValue(t))}))},e.parseMarkPositionsArrayToInputValue=function(t){return JSON.stringify({img_size:[e.chineseImgWidth,e.chineseImgHeight],input_points:t.map((function(e){var t=e.top;return[e.left+10-60-16,t+10]}))})},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.setState({isClient:!0}),this.updateSize()}},{key:"componentWillReceiveProps",value:function(e){this.props.url!==e.url&&this.props.isChinese&&this.setState({markPositionsArray:[]})}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.url!==e.url||this.props.validationMessage!==e.validationMessage||this.props.isShown!==e.isShown||this.props.className!==e.className||this.state.markPositionsArray!==t.markPositionsArray}},{key:"renderCaptcha",value:function(){var e=this,t=this.props,n=t.url,a=t.isChinese,r=t.onRefresh;return n?Object(s.c)("div",{className:a?"Captcha-chineseContainer":"Captcha-englishContainer",children:[Object(s.b)("img",{"data-tooltip":"看不清楚？换一张",className:a?"Captcha-chineseImg":"Captcha-englishImg",src:n,alt:"图形验证码",onClick:a?this.handleMarkPoint:r,ref:a&&function(t){e.chineseCaptchaImg=t}}),a?this.state.markPositionsArray.map((function(t,n){return Object(s.b)(j,{onUnMark:function(){return e.handleUnMarkPoint(n)},position:t},n)})):null]}):null}},{key:"render",value:function(){var e=this.props,t=e.isChinese,n=e.validationMessage,a=e.className,r=e.onUpdateInput,i=e.validations,o=e.isShown,c=e.onRefresh,u=this.state.isClient,l=this.renderCaptcha();return Object(s.b)("div",{className:m()("Captcha",a,{"Captcha-chinese":t&&u}),style:o?{}:{width:"0",height:"0",opacity:"0",overflow:"hidden",margin:"0",padding:"0",border:"0"},children:t?Object(s.c)("div",{children:[Object(s.c)("div",{className:"Captcha-chineseOperator",children:[Object(s.b)("span",{className:m()("Captcha-info",{"Captcha-error":Boolean(n)}),children:n||"请点击图中倒立的文字"}),Object(s.b)(v.c,{className:"Captcha-chineseRefreshButton",preset:"plain",onClick:c,children:Object(s.b)(b.a,{size:20})})]}),l]}):Object(s.c)("div",{children:[Object(s.b)(C.a,{name:"captcha",type:"text",errorMessageClassName:"Captcha-errorMessage",placeholder:"验证码",onChange:r,validations:o?i:[],manualValidateError:n,tabIndex:o?0:-1}),Object(s.b)("span",{className:"Captcha-englishImage",children:l})]})})}}]),n}(d.Component);R.propTypes={isChinese:l.a.bool,url:l.a.string,validationMessage:l.a.string,onValidation:l.a.func,onRefresh:l.a.func.isRequired,onUpdateInput:l.a.func.isRequired,isShown:l.a.bool,validations:l.a.array},R.defaultProps={isChinese:!1,isShown:!1,validations:[{type:"required",message:"请填写验证码",className:"Captcha-requiredErrorMessage"}]};var k=R,T=n(38),N=n.n(T);function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var D=function(e){Object(i.a)(n,e);var t=Q(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={validationMessage:""},e.handleValidation=function(t){var n=t.message,a=t.needsRefresh;n&&e.setState({validationMessage:n});var r=e.props,i=r.captchaNeeded,o=r.checkIfCaptchaNeeded,c=r.requestForCaptcha;!i&&a?o(e.lang):a&&c(e.lang)},e.handleRefresh=function(){e.props.requestForCaptcha(e.lang)},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.type,n=e.isChinese,a=e.checkIfCaptchaNeeded;this.lang=n?"cn":"en",this.type="register"===t?"register":"login",a(this.lang)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.validationResult,a=void 0===n?{}:n,r=t.captchaNeeded,i=t.requestForCaptcha,o=e.validationResult,c=void 0===o?{}:o,s=e.captchaNeeded;!r&&s&&i(this.lang),a.timestamp!==c.timestamp&&this.handleValidation(c),!this.props.isShown&&e.isShown&&N.a.increment("captchaV1.show.count")}},{key:"componentWillUnmount",value:function(){this.props.resetCaptchaInfo()}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.isChinese,a=e.onUpdateInput,r=e.className,i=e.captchaBase64String,o=e.isShown,c=this.state.validationMessage,u="digitsLogin"!==t?k.defaultProps.validations:[];return Object(s.b)(k,{className:r,isShown:o,isChinese:n,url:"data:image/jpg;base64,".concat(i),validationMessage:c,onRefresh:this.handleRefresh,onValidation:this.handleValidation,validations:u,onUpdateInput:a})}}]),n}(d.Component);D.propTypes={canCaptchaShown:l.a.bool,isChinese:l.a.bool,type:l.a.oneOf(["login","digitsLogin","register"]).isRequired,validationResult:l.a.object,captchaNeeded:l.a.bool,captchaBase64String:l.a.string,onUpdateInput:l.a.func,checkIfCaptchaNeeded:l.a.func,requestForCaptcha:l.a.func},D.defaultProps={canCaptchaShown:!1,isChinese:!1};var P=Object(h.connect)((function(e,t){var n=e.captcha,a=n.captchaNeeded,r=n.captchaBase64String,i=t.canCaptchaShown;return{isShown:Boolean(i&&a&&r),captchaNeeded:a,captchaBase64String:r}}),{checkIfCaptchaNeeded:p.c,requestForCaptcha:p.f,resetCaptchaInfo:p.h})(D);t.a=P},1220:function(e,t,n){"use strict";var a=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;t.a=function(e){return a.test(e)}},1257:function(e,t,n){"use strict";var a=n(2),r=n.n(a),i=n(17),o=function(e){return r.a.createElement(i.a,e,r.a.createElement("path",{d:"M1 11.5C1 15 7 19 12 19s11-4 11-7.5S17 4 12 4 1 8 1 11.5zm11 5c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm-3-5c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z",fillRule:"evenodd"}))};o.defaultProps={name:"Eye"},t.a=o},1258:function(e,t,n){"use strict";var a=n(2),r=n.n(a),i=n(17),o=function(e){return r.a.createElement(i.a,e,r.a.createElement("path",{d:"M17.007 11.504c0 .65-.13 1.26-.36 1.83l3 3.073S23 14.136 23 11.504C23 8.008 17.255 4 11.995 4c-1.4 0-2.741.25-3.982.701l2.161 2.16c.57-.23 1.18-.36 1.831-.36a5.004 5.004 0 0 1 5.002 5.003zM2.57 4.342l2.067 2.075C3.499 7.258 1 9.119 1 11.504c0 3.336 5.79 7.503 11.005 7.503 1.55 0 3.031-.3 4.382-.84l.42.42 2.125 2.118s.782.571 1.314 0-.074-1.305-.074-1.305L3.955 3.183s-.76-.742-1.385-.19c-.626.554 0 1.35 0 1.35zm4.963 4.96l1.55 1.552c-.05.21-.08.43-.08.65 0 1.66 1.341 3.001 3.002 3.001.22 0 .44-.03.65-.08l1.551 1.551c-.67.33-1.41.53-2.2.53a5.004 5.004 0 0 1-5.003-5.002c0-.79.2-1.53.53-2.201zm4.312-.78l3.151 3.152.02-.16c0-1.66-1.34-3.001-3.001-3.001l-.17.01z",opacity:".9",fillRule:"evenodd"}))};o.defaultProps={name:"EyeSlash"},t.a=o},1259:function(e,t,n){"use strict";var a=n(2),r=n.n(a),i=n(17),o=function(e){return r.a.createElement(i.a,e,r.a.createElement("path",{d:"M2.224 21.667s4.24-1.825 4.788-2.056C15.029 23.141 22 17.714 22 11.898 22 6.984 17.523 3 12 3S2 6.984 2 11.898c0 1.86.64 3.585 1.737 5.013-.274.833-1.513 4.756-1.513 4.756zm5.943-9.707c.69 0 1.25-.569 1.25-1.271a1.26 1.26 0 0 0-1.25-1.271c-.69 0-1.25.569-1.25 1.27 0 .703.56 1.272 1.25 1.272zm7.583 0c.69 0 1.25-.569 1.25-1.271a1.26 1.26 0 0 0-1.25-1.271c-.69 0-1.25.569-1.25 1.27 0 .703.56 1.272 1.25 1.272z",fillRule:"evenodd"}))};o.defaultProps={name:"WeChat"},t.a=o},1260:function(e,t,n){"use strict";var a=n(2),r=n.n(a),i=n(17),o=function(e){return r.a.createElement(i.a,e,r.a.createElement("path",{fill:"#FB6622",d:"M15.518 3.06c8.834-.854 7.395 7.732 7.394 7.731-.625 1.439-1.673.309-1.673.309.596-7.519-5.692-6.329-5.692-6.329-.898-1.067-.029-1.711-.029-1.711zm4.131 6.985c-.661 1.01-1.377.126-1.376.126.205-3.179-2.396-2.598-2.396-2.598-.719-.765-.091-1.346-.091-1.346 4.882-.551 3.863 3.818 3.863 3.818zM5.317 7.519s4.615-3.86 6.443-1.328c0 0 .662 1.08-.111 2.797.003-.003 3.723-1.96 5.408.159 0 0 .848 1.095-.191 2.649 0 0 2.918-.099 2.918 2.715 0 2.811-4.104 6.44-9.315 6.44-5.214 0-8.026-2.092-8.596-3.102 0 0-3.475-4.495 3.444-10.33zm10.448 7.792s.232-4.411-5.71-4.207c-6.652.231-6.579 4.654-6.579 4.654.021.39.097 3.713 5.842 3.713 5.98 0 6.447-4.16 6.447-4.16zm-9.882.86s-.059-3.632 3.804-3.561c3.412.06 3.206 3.165 3.206 3.165s-.026 2.979-3.684 2.979c-3.288 0-3.326-2.583-3.326-2.583zm2.528 1.037c.672 0 1.212-.447 1.212-.998 0-.551-.543-.998-1.212-.998-.672 0-1.215.447-1.215.998 0 .551.546.998 1.215.998z",fillRule:"evenodd"}))};o.defaultProps={name:"Weibo"},t.a=o},1277:function(e,t,n){"use strict";function a(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return function(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];var i=a[a.length-1]||{};return n.reduce((function(t,n,r){return t.concat(Number.isInteger(n)&&a[n]||i[n],e[r+1])}),[e[0]]).join("")}}n.d(t,"a",(function(){return a}))},1278:function(e,t,n){},1279:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){return setTimeout(t,e)}))};function r(e){var t=[];return e.reduce((function(e,n){return e.then((function(){return n().then((function(e){t.push(e)}))}))}),Promise.resolve()).then((function(){return t}))}},1310:function(e,t,n){"use strict";var a=n(27),r=n(8),i=n(11),o=n(9),c=n(10),s=n(4),u=n(1),l=n(3),d=n.n(l),h=n(2),p=n(14),f=n.n(p),g=n(25),m=n(84),b=n.n(m);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var r=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var C=function(e){Object(o.a)(n,e);var t=v(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).clearTimer=function(){a.timer&&window.clearInterval(a.timer)},a.handleClick=function(e){a.state.isCounting||a.startTiming(e)},a.state={countDownTime:e.countDownTime,isCounting:!1},a.isInitialState=!0,a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.startAtOnce&&this.startTiming()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.interceptTime,a=t.reStartTime,r=e.interceptTime,i=e.reStartTime;n!==r&&this.resetTiming(),a!==i&&(this.resetTiming(),this.startTiming())}},{key:"componentWillUnmount",value:function(){this.clearTimer()}},{key:"resetTiming",value:function(){this.clearTimer(),this.setState({countDownTime:this.props.countDownTime,isCounting:!1})}},{key:"startTiming",value:function(e){var t=this,n=this.props,a=n.event,r=n.countDownEndEvent,i=null,o=function(){t.isInitialState=!1,t.setState({isCounting:!0}),t.timer=setInterval((function(){var e=t.state.countDownTime;e<=0?(r&&r(),t.resetTiming()):t.setState({countDownTime:e-1})}),1e3)};"function"==typeof a&&(i=a(e,o)),!1!==i&&o()}},{key:"renderText",value:function(){var e=this.props,t=e.initialText,n=e.resetText,a=e.countingText,r=this.state,i=r.countDownTime;return r.isCounting?a({count:i}):this.isInitialState?t:n||t}},{key:"render",value:function(){var e=b()(this.props,["initialText","resetText","countingText","startAtOnce","countDownTime","event","interceptTime","countDownEndEvent","reStartTime"]),t=e.className,n=e.disabled,r=Object(a.a)(e,["className","disabled"]),i=this.state.isCounting;return Object(u.b)(g.c,Object.assign({className:f()("CountingDownButton",t,{"is-counting":i})},r,{onClick:this.handleClick,disabled:n||i,children:this.renderText()}))}}]),n}(h.Component);C.propTypes={countDownTime:d.a.number,startAtOnce:d.a.bool,initialText:d.a.string.isRequired,resetText:d.a.string,countingText:d.a.func.isRequired,event:d.a.func,countDownEndEvent:d.a.func,interceptTime:d.a.number,reStartTime:d.a.number},C.defaultProps={countDownTime:60,startAtOnce:!1,interceptTime:-1,reStartTime:-1};t.a=C},1334:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(8),i=n(11),o=n(9),c=n(10),s=n(4),u=n(1),l=n(2),d=n(18),h=n(21),p=n(25),f=n(231),g=n(391),m=n(112),b=n(906),v=n(1068),C=n(1091),A=n(1092),E=n(1215);n(1278);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var r=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var w={phoneNoError:null,fullnameError:null,passwordError:null,digitsError:null},y=function(e){Object(o.a)(n,e);var t=S(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={email:"",password:"",fullname:"",captcha:"",customErrorInputMap:Object.assign({},w)},e.handleChange=function(t){return function(n){e.setState(Object(a.a)({},t,n))}},e.runBeforeCheckCaptcha=function(t){var n=e.state.captcha,a=e.props,r=a.captchaNeeded,i=a.checkCaptcha;if(!e.captchaValidated&&r)return n?void i(n).then((function(n){n.payload.success&&(e.captchaValidated=!0,t())})):void e.setState({validationResult:{message:"请输入验证码",needsRefresh:!1,timestamp:Date.now()},smsInputInterceptTime:Date.now()});t()},e.handleSubmit=function(){e.runBeforeCheckCaptcha((function(){var t=e.props,n=t.validateAndRegister;(0,t.resetRegisterValidateResult)();var a=e.state;n({source:"com.zhihu.web",registerType:"email",email:a.email,password:a.password,fullname:a.fullname})}))},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.isLogin&&(location.href="https://www.zhihu.com/logout?next=/email-register")}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.captchaValidationMessage,a=t.registerConfirmSucceeded,r=e.captchaValidationMessage,i=e.registerConfirmSucceeded;!a&&i&&(location.href="/"),!n&&r&&this.setState({smsInputInterceptTime:Date.now(),validationResult:{message:r,needsRefresh:Boolean(r),timestamp:Date.now()}})}},{key:"render",value:function(){var e=this.state.validationResult,t=this.props.registerValidateErrors,n=t.email,a=(n=void 0===n?{}:n).message,r=t.fullname,i=(r=void 0===r?{}:r).message,o=t.password,c=(o=void 0===o?{}:o).message;return Object(u.c)(b.b,{className:"SignContainer-content EmailRegister",onSubmit:this.handleSubmit,children:[Object(u.b)(A.a,{onChange:this.handleChange("fullname"),name:"fullname",placeholder:"用户名",manualValidateError:i}),Object(u.b)(v.a,{type:"register",placeholder:"输入邮箱",onChange:this.handleChange("email"),manualValidateError:a,supportedCountriesShown:!1}),Object(u.b)(C.a,{onChange:this.handleChange("password"),manualValidateError:c}),Object(u.b)(E.a,{className:"SignFlow-captchaContainer Register-captcha",type:"register",isChinese:this.captchaIsChinese,canCaptchaShown:!0,onUpdateInput:this.handleChange("captcha"),validationResult:e}),Object(u.b)(p.c,{className:"EmailRegister-submitButton",preset:"primary",color:"blue",type:"submit",children:"注册"})]})}}]),n}(l.Component);t.default=Object(d.compose)(Object(f.b)(),Object(h.connect)((function(e){var t=e.captcha,n=t.captchaNeeded,a=t.captchaValidationMessage,r=e.register;return{captchaNeeded:n,registerValidateErrors:r.registerValidateErrors,captchaValidationMessage:a,registerConfirmSucceeded:r.registerConfirmSucceeded}}),{checkCaptcha:m.b,validateAndRegister:g.f,resetRegisterValidateResult:g.d}))(y)},1343:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(2)),r=i(n(190));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(e){return a.default.createElement(r.default,Object.assign({viewBox:"0 0 8 8"},e),a.default.createElement("path",{d:"M7.755 1.434A.839.839 0 0 0 7.75.248.837.837 0 0 0 6.565.244L4 2.81 1.434.245A.839.839 0 0 0 .248.248c-.33.33-.33.86-.004 1.186L2.81 4 .246 6.566A.839.839 0 0 0 .25 7.752c.33.33.86.33 1.185.004L4 5.19l2.566 2.565a.839.839 0 0 0 1.186-.004c.33-.33.33-.86.004-1.185L5.19 4l2.565-2.566z",fillRule:"evenodd"}))};t.default=o},1344:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(2)),r=i(n(190));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(e){return a.default.createElement(r.default,Object.assign({viewBox:"0 0 20 20"},e),a.default.createElement("circle",{cx:"83",cy:"111",r:"10",transform:"translate(-73 -101)"}))};t.default=o},1345:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(2)),r=i(n(190));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(e){return a.default.createElement(r.default,Object.assign({width:"52",height:"52",fill:"none",xmlnsXlink:"http://www.w3.org/1999/xlink"},e),a.default.createElement("mask",{id:"id-3757926926-a",width:"52",height:"52",x:"0",y:"0",maskUnits:"userSpaceOnUse"},a.default.createElement("path",{fill:"#fff",d:"M0 0l52 52V0H0z"})),a.default.createElement("g",{mask:"url(#id-3757926926-a)"},a.default.createElement("path",{fill:"#06F",d:"M0 0h48a4 4 0 0 1 4 4v48L0 0z"}),a.default.createElement("path",{fill:"url(#id-3757926926-b)",d:"M0 0h52v52H0z"})),a.default.createElement("defs",null,a.default.createElement("pattern",{id:"id-3757926926-b",width:"1",height:"1",patternContentUnits:"objectBoundingBox"},a.default.createElement("use",{transform:"scale(.00216)",xlinkHref:"#id-3757926926-c"})),a.default.createElement("image",{id:"id-3757926926-c",width:"463",height:"463",xlinkHref:"data:image/png;base64,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"})))};t.default=o},1442:function(e,t,n){"use strict";var a;!function(r){function i(e,t,n){var a,r,i,o,c,g,m,b,v,C=0,A=[],E=0,S=!1,w=[],y=[],O=!1,j=!1,I=-1;if(a=(n=n||{}).encoding||"UTF8",(v=n.numRounds||1)!==parseInt(v,10)||1>v)throw Error("numRounds must a integer >= 1");if("SHA-1"===e)c=512,g=x,m=z,o=160,b=function(e){return e.slice()};else if(0===e.lastIndexOf("SHA-",0))if(g=function(t,n){return L(t,n,e)},m=function(t,n,a,r){var i,o;if("SHA-224"===e||"SHA-256"===e)i=15+(n+65>>>9<<4),o=16;else{if("SHA-384"!==e&&"SHA-512"!==e)throw Error("Unexpected error in SHA-2 implementation");i=31+(n+129>>>10<<5),o=32}for(;t.length<=i;)t.push(0);for(t[n>>>5]|=128<<24-n%32,n+=a,t[i]=4294967295&n,t[i-1]=n/4294967296|0,a=t.length,n=0;n<a;n+=o)r=L(t.slice(n,n+o),r,e);if("SHA-224"===e)t=[r[0],r[1],r[2],r[3],r[4],r[5],r[6]];else if("SHA-256"===e)t=r;else if("SHA-384"===e)t=[r[0].a,r[0].b,r[1].a,r[1].b,r[2].a,r[2].b,r[3].a,r[3].b,r[4].a,r[4].b,r[5].a,r[5].b];else{if("SHA-512"!==e)throw Error("Unexpected error in SHA-2 implementation");t=[r[0].a,r[0].b,r[1].a,r[1].b,r[2].a,r[2].b,r[3].a,r[3].b,r[4].a,r[4].b,r[5].a,r[5].b,r[6].a,r[6].b,r[7].a,r[7].b]}return t},b=function(e){return e.slice()},"SHA-224"===e)c=512,o=224;else if("SHA-256"===e)c=512,o=256;else if("SHA-384"===e)c=1024,o=384;else{if("SHA-512"!==e)throw Error("Chosen SHA variant is not supported");c=1024,o=512}else{if(0!==e.lastIndexOf("SHA3-",0)&&0!==e.lastIndexOf("SHAKE",0))throw Error("Chosen SHA variant is not supported");var B=6;if(g=q,b=function(e){var t,n=[];for(t=0;5>t;t+=1)n[t]=e[t].slice();return n},I=1,"SHA3-224"===e)c=1152,o=224;else if("SHA3-256"===e)c=1088,o=256;else if("SHA3-384"===e)c=832,o=384;else if("SHA3-512"===e)c=576,o=512;else if("SHAKE128"===e)c=1344,o=-1,B=31,j=!0;else{if("SHAKE256"!==e)throw Error("Chosen SHA variant is not supported");c=1088,o=-1,B=31,j=!0}m=function(e,t,n,a,r){var i,o=B,s=[],u=(n=c)>>>5,l=0,d=t>>>5;for(i=0;i<d&&t>=n;i+=u)a=q(e.slice(i,i+u),a),t-=n;for(e=e.slice(i),t%=n;e.length<u;)e.push(0);for(e[(i=t>>>3)>>2]^=o<<i%4*8,e[u-1]^=2147483648,a=q(e,a);32*s.length<r&&(e=a[l%5][l/5|0],s.push(e.b),!(32*s.length>=r));)s.push(e.a),0==64*(l+=1)%n&&(q(null,a),l=0);return s}}i=f(t,a,I),r=F(e),this.setHMACKey=function(t,n,i){var s;if(!0===S)throw Error("HMAC key already set");if(!0===O)throw Error("Cannot set HMAC key after calling update");if(!0===j)throw Error("SHAKE is not supported for HMAC");for(t=(n=f(n,a=(i||{}).encoding||"UTF8",I)(t)).binLen,n=n.value,i=(s=c>>>3)/4-1,s<t/8&&(n=m(n,t,0,F(e),o));n.length<=i;)n.push(0);for(t=0;t<=i;t+=1)w[t]=909522486^n[t],y[t]=1549556828^n[t];r=g(w,r),C=c,S=!0},this.update=function(e){var t,n,a,o=0,s=c>>>5;for(e=(t=i(e,A,E)).binLen,n=t.value,t=e>>>5,a=0;a<t;a+=s)o+c<=e&&(r=g(n.slice(a,a+s),r),o+=c);C+=o,A=n.slice(o>>>5),E=e%c,O=!0},this.getHash=function(t,n){var a,i,c,f;if(!0===S)throw Error("Cannot call getHash after setting HMAC key");if(c=p(n),!0===j){if(-1===c.shakeLen)throw Error("shakeLen must be specified in options");o=c.shakeLen}switch(t){case"HEX":a=function(e){return s(e,o,I,c)};break;case"B64":a=function(e){return u(e,o,I,c)};break;case"BYTES":a=function(e){return l(e,o,I)};break;case"ARRAYBUFFER":try{i=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}a=function(e){return d(e,o,I)};break;case"UINT8ARRAY":try{i=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}a=function(e){return h(e,o,I)};break;default:throw Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}for(f=m(A.slice(),E,C,b(r),o),i=1;i<v;i+=1)!0===j&&0!=o%32&&(f[f.length-1]&=16777215>>>24-o%32),f=m(f,o,0,F(e),o);return a(f)},this.getHMAC=function(t,n){var a,i,f,v;if(!1===S)throw Error("Cannot call getHMAC without first setting HMAC key");switch(f=p(n),t){case"HEX":a=function(e){return s(e,o,I,f)};break;case"B64":a=function(e){return u(e,o,I,f)};break;case"BYTES":a=function(e){return l(e,o,I)};break;case"ARRAYBUFFER":try{a=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}a=function(e){return d(e,o,I)};break;case"UINT8ARRAY":try{a=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}a=function(e){return h(e,o,I)};break;default:throw Error("outputFormat must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}return i=m(A.slice(),E,C,b(r),o),v=g(y,F(e)),a(v=m(i,o,c,v,o))}}function o(e,t){this.a=e,this.b=t}function c(e,t,n,a){var r,i,o,c,s;for(t=t||[0],i=(n=n||0)>>>3,s=-1===a?3:0,r=0;r<e.length;r+=1)o=(c=r+i)>>>2,t.length<=o&&t.push(0),t[o]|=e[r]<<8*(s+c%4*a);return{value:t,binLen:8*e.length+n}}function s(e,t,n,a){var r,i,o,c="";for(t/=8,o=-1===n?3:0,r=0;r<t;r+=1)i=e[r>>>2]>>>8*(o+r%4*n),c+="0123456789abcdef".charAt(i>>>4&15)+"0123456789abcdef".charAt(15&i);return a.outputUpper?c.toUpperCase():c}function u(e,t,n,a){var r,i,o,c,s="",u=t/8;for(c=-1===n?3:0,r=0;r<u;r+=3)for(i=r+1<u?e[r+1>>>2]:0,o=r+2<u?e[r+2>>>2]:0,o=(e[r>>>2]>>>8*(c+r%4*n)&255)<<16|(i>>>8*(c+(r+1)%4*n)&255)<<8|o>>>8*(c+(r+2)%4*n)&255,i=0;4>i;i+=1)s+=8*r+6*i<=t?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(o>>>6*(3-i)&63):a.b64Pad;return s}function l(e,t,n){var a,r,i,o="";for(t/=8,i=-1===n?3:0,a=0;a<t;a+=1)r=e[a>>>2]>>>8*(i+a%4*n)&255,o+=String.fromCharCode(r);return o}function d(e,t,n){t/=8;var a,r,i,o=new ArrayBuffer(t);for(i=new Uint8Array(o),r=-1===n?3:0,a=0;a<t;a+=1)i[a]=e[a>>>2]>>>8*(r+a%4*n)&255;return o}function h(e,t,n){t/=8;var a,r,i=new Uint8Array(t);for(r=-1===n?3:0,a=0;a<t;a+=1)i[a]=e[a>>>2]>>>8*(r+a%4*n)&255;return i}function p(e){var t={outputUpper:!1,b64Pad:"=",shakeLen:-1};if(e=e||{},t.outputUpper=e.outputUpper||!1,!0===e.hasOwnProperty("b64Pad")&&(t.b64Pad=e.b64Pad),!0===e.hasOwnProperty("shakeLen")){if(0!=e.shakeLen%8)throw Error("shakeLen must be a multiple of 8");t.shakeLen=e.shakeLen}if("boolean"!=typeof t.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!=typeof t.b64Pad)throw Error("Invalid b64Pad formatting option");return t}function f(e,t,n){switch(t){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(e){case"HEX":e=function(e,t,a){var r,i,o,c,s,u,l=e.length;if(0!=l%2)throw Error("String of HEX type must be in byte increments");for(t=t||[0],s=(a=a||0)>>>3,u=-1===n?3:0,r=0;r<l;r+=2){if(i=parseInt(e.substr(r,2),16),isNaN(i))throw Error("String of HEX type contains invalid characters");for(o=(c=(r>>>1)+s)>>>2;t.length<=o;)t.push(0);t[o]|=i<<8*(u+c%4*n)}return{value:t,binLen:4*l+a}};break;case"TEXT":e=function(e,a,r){var i,o,c,s,u,l,d,h,p=0;if(a=a||[0],u=(r=r||0)>>>3,"UTF8"===t)for(h=-1===n?3:0,c=0;c<e.length;c+=1)for(o=[],128>(i=e.charCodeAt(c))?o.push(i):2048>i?(o.push(192|i>>>6),o.push(128|63&i)):55296>i||57344<=i?o.push(224|i>>>12,128|i>>>6&63,128|63&i):(c+=1,i=65536+((1023&i)<<10|1023&e.charCodeAt(c)),o.push(240|i>>>18,128|i>>>12&63,128|i>>>6&63,128|63&i)),s=0;s<o.length;s+=1){for(l=(d=p+u)>>>2;a.length<=l;)a.push(0);a[l]|=o[s]<<8*(h+d%4*n),p+=1}else if("UTF16BE"===t||"UTF16LE"===t)for(h=-1===n?2:0,o="UTF16LE"===t&&1!==n||"UTF16LE"!==t&&1===n,c=0;c<e.length;c+=1){for(i=e.charCodeAt(c),!0===o&&(i=(s=255&i)<<8|i>>>8),l=(d=p+u)>>>2;a.length<=l;)a.push(0);a[l]|=i<<8*(h+d%4*n),p+=2}return{value:a,binLen:8*p+r}};break;case"B64":e=function(e,t,a){var r,i,o,c,s,u,l,d,h=0;if(-1===e.search(/^[a-zA-Z0-9=+\/]+$/))throw Error("Invalid character in base-64 string");if(i=e.indexOf("="),e=e.replace(/\=/g,""),-1!==i&&i<e.length)throw Error("Invalid '=' found in base-64 string");for(t=t||[0],u=(a=a||0)>>>3,d=-1===n?3:0,i=0;i<e.length;i+=4){for(s=e.substr(i,4),o=c=0;o<s.length;o+=1)c|=(r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(s.charAt(o)))<<18-6*o;for(o=0;o<s.length-1;o+=1){for(r=(l=h+u)>>>2;t.length<=r;)t.push(0);t[r]|=(c>>>16-8*o&255)<<8*(d+l%4*n),h+=1}}return{value:t,binLen:8*h+a}};break;case"BYTES":e=function(e,t,a){var r,i,o,c,s,u;for(t=t||[0],o=(a=a||0)>>>3,u=-1===n?3:0,i=0;i<e.length;i+=1)r=e.charCodeAt(i),c=(s=i+o)>>>2,t.length<=c&&t.push(0),t[c]|=r<<8*(u+s%4*n);return{value:t,binLen:8*e.length+a}};break;case"ARRAYBUFFER":try{e=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}e=function(e,t,a){return c(new Uint8Array(e),t,a,n)};break;case"UINT8ARRAY":try{e=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}e=function(e,t,a){return c(e,t,a,n)};break;default:throw Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}return e}function g(e,t){return e<<t|e>>>32-t}function m(e,t){return 32<t?(t-=32,new o(e.b<<t|e.a>>>32-t,e.a<<t|e.b>>>32-t)):0!==t?new o(e.a<<t|e.b>>>32-t,e.b<<t|e.a>>>32-t):e}function b(e,t){return e>>>t|e<<32-t}function v(e,t){var n=null;n=new o(e.a,e.b);return 32>=t?new o(n.a>>>t|n.b<<32-t&4294967295,n.b>>>t|n.a<<32-t&4294967295):new o(n.b>>>t-32|n.a<<64-t&4294967295,n.a>>>t-32|n.b<<64-t&4294967295)}function C(e,t){return 32>=t?new o(e.a>>>t,e.b>>>t|e.a<<32-t&4294967295):new o(0,e.a>>>t-32)}function A(e,t,n){return e&t^~e&n}function E(e,t,n){return new o(e.a&t.a^~e.a&n.a,e.b&t.b^~e.b&n.b)}function S(e,t,n){return e&t^e&n^t&n}function w(e,t,n){return new o(e.a&t.a^e.a&n.a^t.a&n.a,e.b&t.b^e.b&n.b^t.b&n.b)}function y(e){return b(e,2)^b(e,13)^b(e,22)}function O(e){var t=v(e,28),n=v(e,34);return e=v(e,39),new o(t.a^n.a^e.a,t.b^n.b^e.b)}function j(e){return b(e,6)^b(e,11)^b(e,25)}function I(e){var t=v(e,14),n=v(e,18);return e=v(e,41),new o(t.a^n.a^e.a,t.b^n.b^e.b)}function B(e){return b(e,7)^b(e,18)^e>>>3}function R(e){var t=v(e,1),n=v(e,8);return e=C(e,7),new o(t.a^n.a^e.a,t.b^n.b^e.b)}function k(e){return b(e,17)^b(e,19)^e>>>10}function T(e){var t=v(e,19),n=v(e,61);return e=C(e,6),new o(t.a^n.a^e.a,t.b^n.b^e.b)}function N(e,t){var n=(65535&e)+(65535&t);return((e>>>16)+(t>>>16)+(n>>>16)&65535)<<16|65535&n}function Q(e,t,n,a){var r=(65535&e)+(65535&t)+(65535&n)+(65535&a);return((e>>>16)+(t>>>16)+(n>>>16)+(a>>>16)+(r>>>16)&65535)<<16|65535&r}function D(e,t,n,a,r){var i=(65535&e)+(65535&t)+(65535&n)+(65535&a)+(65535&r);return((e>>>16)+(t>>>16)+(n>>>16)+(a>>>16)+(r>>>16)+(i>>>16)&65535)<<16|65535&i}function P(e,t){var n,a,r;return n=(65535&e.b)+(65535&t.b),r=(65535&(a=(e.b>>>16)+(t.b>>>16)+(n>>>16)))<<16|65535&n,n=(65535&e.a)+(65535&t.a)+(a>>>16),new o((65535&(a=(e.a>>>16)+(t.a>>>16)+(n>>>16)))<<16|65535&n,r)}function M(e,t,n,a){var r,i,c;return r=(65535&e.b)+(65535&t.b)+(65535&n.b)+(65535&a.b),c=(65535&(i=(e.b>>>16)+(t.b>>>16)+(n.b>>>16)+(a.b>>>16)+(r>>>16)))<<16|65535&r,r=(65535&e.a)+(65535&t.a)+(65535&n.a)+(65535&a.a)+(i>>>16),new o((65535&(i=(e.a>>>16)+(t.a>>>16)+(n.a>>>16)+(a.a>>>16)+(r>>>16)))<<16|65535&r,c)}function V(e,t,n,a,r){var i,c,s;return i=(65535&e.b)+(65535&t.b)+(65535&n.b)+(65535&a.b)+(65535&r.b),s=(65535&(c=(e.b>>>16)+(t.b>>>16)+(n.b>>>16)+(a.b>>>16)+(r.b>>>16)+(i>>>16)))<<16|65535&i,i=(65535&e.a)+(65535&t.a)+(65535&n.a)+(65535&a.a)+(65535&r.a)+(c>>>16),new o((65535&(c=(e.a>>>16)+(t.a>>>16)+(n.a>>>16)+(a.a>>>16)+(r.a>>>16)+(i>>>16)))<<16|65535&i,s)}function U(e,t){return new o(e.a^t.a,e.b^t.b)}function F(e){var t,n=[];if("SHA-1"===e)n=[1732584193,4023233417,2562383102,271733878,3285377520];else if(0===e.lastIndexOf("SHA-",0))switch(n=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],t=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],e){case"SHA-224":break;case"SHA-256":n=t;break;case"SHA-384":n=[new o(3418070365,n[0]),new o(1654270250,n[1]),new o(2438529370,n[2]),new o(355462360,n[3]),new o(1731405415,n[4]),new o(41048885895,n[5]),new o(3675008525,n[6]),new o(1203062813,n[7])];break;case"SHA-512":n=[new o(t[0],4089235720),new o(t[1],2227873595),new o(t[2],4271175723),new o(t[3],1595750129),new o(t[4],2917565137),new o(t[5],725511199),new o(t[6],4215389547),new o(t[7],327033209)];break;default:throw Error("Unknown SHA variant")}else{if(0!==e.lastIndexOf("SHA3-",0)&&0!==e.lastIndexOf("SHAKE",0))throw Error("No SHA variants supported");for(e=0;5>e;e+=1)n[e]=[new o(0,0),new o(0,0),new o(0,0),new o(0,0),new o(0,0)]}return n}function x(e,t){var n,a,r,i,o,c,s,u=[];for(n=t[0],a=t[1],r=t[2],i=t[3],o=t[4],s=0;80>s;s+=1)u[s]=16>s?e[s]:g(u[s-3]^u[s-8]^u[s-14]^u[s-16],1),c=20>s?D(g(n,5),a&r^~a&i,o,1518500249,u[s]):40>s?D(g(n,5),a^r^i,o,1859775393,u[s]):60>s?D(g(n,5),S(a,r,i),o,2400959708,u[s]):D(g(n,5),a^r^i,o,3395469782,u[s]),o=i,i=r,r=g(a,30),a=n,n=c;return t[0]=N(n,t[0]),t[1]=N(a,t[1]),t[2]=N(r,t[2]),t[3]=N(i,t[3]),t[4]=N(o,t[4]),t}function z(e,t,n,a){var r;for(r=15+(t+65>>>9<<4);e.length<=r;)e.push(0);for(e[t>>>5]|=128<<24-t%32,t+=n,e[r]=4294967295&t,e[r-1]=t/4294967296|0,t=e.length,r=0;r<t;r+=16)a=x(e.slice(r,r+16),a);return a}function L(e,t,n){var a,r,i,c,s,u,l,d,h,p,f,g,m,b,v,C,U,F,x,z,L,q,W,K=[];if("SHA-224"===n||"SHA-256"===n)p=64,g=1,q=Number,m=N,b=Q,v=D,C=B,U=k,F=y,x=j,L=S,z=A,W=H;else{if("SHA-384"!==n&&"SHA-512"!==n)throw Error("Unexpected error in SHA-2 implementation");p=80,g=2,q=o,m=P,b=M,v=V,C=R,U=T,F=O,x=I,L=w,z=E,W=J}for(n=t[0],a=t[1],r=t[2],i=t[3],c=t[4],s=t[5],u=t[6],l=t[7],f=0;f<p;f+=1)16>f?(h=f*g,d=e.length<=h?0:e[h],h=e.length<=h+1?0:e[h+1],K[f]=new q(d,h)):K[f]=b(U(K[f-2]),K[f-7],C(K[f-15]),K[f-16]),d=v(l,x(c),z(c,s,u),W[f],K[f]),h=m(F(n),L(n,a,r)),l=u,u=s,s=c,c=m(i,d),i=r,r=a,a=n,n=m(d,h);return t[0]=m(n,t[0]),t[1]=m(a,t[1]),t[2]=m(r,t[2]),t[3]=m(i,t[3]),t[4]=m(c,t[4]),t[5]=m(s,t[5]),t[6]=m(u,t[6]),t[7]=m(l,t[7]),t}function q(e,t){var n,a,r,i,c=[],s=[];if(null!==e)for(a=0;a<e.length;a+=2)t[(a>>>1)%5][(a>>>1)/5|0]=U(t[(a>>>1)%5][(a>>>1)/5|0],new o(e[a+1],e[a]));for(n=0;24>n;n+=1){for(i=F("SHA3-"),a=0;5>a;a+=1){r=t[a][0];var u=t[a][1],l=t[a][2],d=t[a][3],h=t[a][4];c[a]=new o(r.a^u.a^l.a^d.a^h.a,r.b^u.b^l.b^d.b^h.b)}for(a=0;5>a;a+=1)s[a]=U(c[(a+4)%5],m(c[(a+1)%5],1));for(a=0;5>a;a+=1)for(r=0;5>r;r+=1)t[a][r]=U(t[a][r],s[a]);for(a=0;5>a;a+=1)for(r=0;5>r;r+=1)i[r][(2*a+3*r)%5]=m(t[a][r],W[a][r]);for(a=0;5>a;a+=1)for(r=0;5>r;r+=1)t[a][r]=U(i[a][r],new o(~i[(a+1)%5][r].a&i[(a+2)%5][r].a,~i[(a+1)%5][r].b&i[(a+2)%5][r].b));t[0][0]=U(t[0][0],K[n])}return t}var H,J,W,K;J=[new o((H=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298])[0],3609767458),new o(H[1],602891725),new o(H[2],3964484399),new o(H[3],2173295548),new o(H[4],4081628472),new o(H[5],3053834265),new o(H[6],2937671579),new o(H[7],3664609560),new o(H[8],2734883394),new o(H[9],1164996542),new o(H[10],1323610764),new o(H[11],3590304994),new o(H[12],4068182383),new o(H[13],991336113),new o(H[14],633803317),new o(H[15],3479774868),new o(H[16],2666613458),new o(H[17],944711139),new o(H[18],2341262773),new o(H[19],2007800933),new o(H[20],1495990901),new o(H[21],1856431235),new o(H[22],3175218132),new o(H[23],2198950837),new o(H[24],3999719339),new o(H[25],766784016),new o(H[26],2566594879),new o(H[27],3203337956),new o(H[28],1034457026),new o(H[29],2466948901),new o(H[30],3758326383),new o(H[31],168717936),new o(H[32],1188179964),new o(H[33],1546045734),new o(H[34],1522805485),new o(H[35],2643833823),new o(H[36],2343527390),new o(H[37],1014477480),new o(H[38],1206759142),new o(H[39],344077627),new o(H[40],1290863460),new o(H[41],3158454273),new o(H[42],3505952657),new o(H[43],106217008),new o(H[44],3606008344),new o(H[45],1432725776),new o(H[46],1467031594),new o(H[47],851169720),new o(H[48],3100823752),new o(H[49],1363258195),new o(H[50],3750685593),new o(H[51],3785050280),new o(H[52],3318307427),new o(H[53],3812723403),new o(H[54],2003034995),new o(H[55],3602036899),new o(H[56],1575990012),new o(H[57],1125592928),new o(H[58],2716904306),new o(H[59],442776044),new o(H[60],593698344),new o(H[61],3733110249),new o(H[62],2999351573),new o(H[63],3815920427),new o(3391569614,3928383900),new o(3515267271,566280711),new o(3940187606,3454069534),new o(4118630271,4000239992),new o(116418474,1914138554),new o(174292421,2731055270),new o(289380356,3203993006),new o(460393269,320620315),new o(685471733,587496836),new o(852142971,1086792851),new o(1017036298,365543100),new o(1126000580,2618297676),new o(1288033470,3409855158),new o(1501505948,4234509866),new o(1607167915,987167468),new o(1816402316,1246189591)],K=[new o(0,1),new o(0,32898),new o(2147483648,32906),new o(2147483648,2147516416),new o(0,32907),new o(0,2147483649),new o(2147483648,2147516545),new o(2147483648,32777),new o(0,138),new o(0,136),new o(0,2147516425),new o(0,2147483658),new o(0,2147516555),new o(2147483648,139),new o(2147483648,32905),new o(2147483648,32771),new o(2147483648,32770),new o(2147483648,128),new o(0,32778),new o(2147483648,2147483658),new o(2147483648,2147516545),new o(2147483648,32896),new o(0,2147483649),new o(2147483648,2147516424)],W=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]],void 0===(a=function(){return i}.call(t,n,t,e))||(e.exports=a)}()},1443:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(2)),r=i(n(190));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(e){return a.default.createElement(r.default,Object.assign({width:"116",height:"116",viewBox:"0 0 116 116"},e),a.default.createElement("path",{d:"M58 106c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm0-5c23.748 0 43-19.252 43-43S81.748 15 58 15 15 34.252 15 58s19.252 43 43 43zm-7.495-32.502L80.113 38.89a3.017 3.017 0 0 1 4.262-.017c1.184 1.176 1.17 3.075-.015 4.26l-31.71 31.71c-1.183 1.182-3.096 1.194-4.27.02l-12.52-12.52a2.997 2.997 0 0 1-.008-4.24 2.996 2.996 0 0 1 4.242.008L50.507 68.5z"}))};t.default=o},1444:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(2)),r=i(n(190));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(e){return a.default.createElement(r.default,Object.assign({width:"116",height:"116",viewBox:"0 0 116 116"},e),a.default.createElement("path",{d:"M58 106c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm0-5c23.748 0 43-19.252 43-43S81.748 15 58 15 15 34.252 15 58s19.252 43 43 43zm-4-19c0-2.21 1.795-4 4-4 2.21 0 4 1.795 4 4 0 2.21-1.795 4-4 4-2.21 0-4-1.795-4-4zm1-48.993A3.006 3.006 0 0 1 58 30c1.657 0 3 1.334 3 3.007v36.986A3.006 3.006 0 0 1 58 73c-1.657 0-3-1.334-3-3.007V33.007z",fillRule:"evenodd"}))};t.default=o},1445:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(2)),r=i(n(190));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(e){return a.default.createElement(r.default,Object.assign({width:"52",height:"52",fill:"none"},e),a.default.createElement("mask",{id:"id-320414155-a",width:"52",height:"52",x:"0",y:"0",maskUnits:"userSpaceOnUse"},a.default.createElement("path",{fill:"#fff",d:"M0 0l52 52V0H0z"})),a.default.createElement("g",{mask:"url(#id-320414155-a)"},a.default.createElement("path",{fill:"#06F",d:"M0 0l52 52V0H0z"}),a.default.createElement("path",{fill:"#fff",d:"M22.125 4h13.75A4.125 4.125 0 0 1 40 8.125v27.75A4.125 4.125 0 0 1 35.875 40h-13.75A4.125 4.125 0 0 1 18 35.875V8.125A4.125 4.125 0 0 1 22.125 4zm6.938 34.222c1.139 0 2.062-.945 2.062-2.11 0-1.167-.923-2.112-2.063-2.112-1.139 0-2.062.945-2.062 2.111 0 1.166.923 2.111 2.063 2.111zM21 8.333v24h16v-24H21z",fillRule:"evenodd",clipRule:"evenodd"}),a.default.createElement("path",{fill:"#fff",d:"M46.996 15.482L39 19.064l-7.996-3.582A1.6 1.6 0 0 1 32.6 14h12.8a1.6 1.6 0 0 1 1.596 1.482zM47 16.646V24.4a1.6 1.6 0 0 1-1.6 1.6H32.6a1.6 1.6 0 0 1-1.6-1.6v-7.754l8 3.584 8-3.584z",fillRule:"evenodd",clipRule:"evenodd"}),a.default.createElement("path",{fill:"#06F",d:"M31 15.483v1.17l8 3.577 8-3.577v-1.17l-8 3.581-8-3.581z"})))};t.default=o},1446:function(e,t,n){"use strict";var a=n(2),r=n.n(a),i=n(17),o=function(e){return r.a.createElement(i.a,e,r.a.createElement("path",{d:"M12.003 2c-2.265 0-6.29 1.364-6.29 7.325v1.195S3.55 14.96 3.55 17.474c0 .665.17 1.025.281 1.025.114 0 .902-.484 1.748-2.072 0 0-.18 2.197 1.904 3.967 0 0-1.77.495-1.77 1.182 0 .686 4.078.43 6.29 0 2.239.425 6.287.687 6.287 0 0-.688-1.768-1.182-1.768-1.182 2.085-1.77 1.905-3.967 1.905-3.967.845 1.588 1.634 2.072 1.746 2.072.111 0 .283-.36.283-1.025 0-2.514-2.166-6.954-2.166-6.954V9.325C18.29 3.364 14.268 2 12.003 2z",fillRule:"evenodd"}))};o.defaultProps={name:"QQ"},t.a=o},1447:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(2)),r=i(n(190));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(e){return a.default.createElement(r.default,Object.assign({width:"20",height:"20",fill:"none",viewBox:"0 0 20 20"},e),a.default.createElement("path",{fill:"url(#id-3051037867-a)",d:"M16.131 0H3.87A3.869 3.869 0 0 0 0 3.869V16.13A3.869 3.869 0 0 0 3.869 20H16.13A3.869 3.869 0 0 0 20 16.131V3.87A3.869 3.869 0 0 0 16.131 0z"}),a.default.createElement("path",{fill:"#fff",d:"M14.9 10.046V7.391l2.67-.137.232-.015c.147-.26.214-.559.192-.857-.02-.071-.059-.19-.178-.163a9.048 9.048 0 0 1-1.204.207c-.777.092-1.119.116-2.196.193-1.893.14-3.56.205-3.56.205a.722.722 0 0 0 .75.724c.642-.027 1.582-.071 2.531-.119v2.617h-3.616a.753.753 0 0 0 .753.754h2.843v2.008c0 .255-.13.341-.345.347h-1.1a1.187 1.187 0 0 0 .632.742c.244.081.503.109.76.08.385-.02.836-.237.836-1.014V10.8h3.175a.362.362 0 0 0 .361-.362v-.392H14.9z"}),a.default.createElement("path",{fill:"#fff",d:"M12.414 8.251a.65.65 0 0 0-.908-.148l-.107.077 1.187 1.662.635-.457-.807-1.134zm4.147-.057l-.89 1.166.647.472 1.273-1.685-.107-.077a.653.653 0 0 0-.923.124zM9.737 7.031H6.263v6.065h.858l.112.732 1.154-.732h1.356L9.737 7.03zm-1.465 5.311l-.674.415-.065-.427h-.487V7.785h1.908v4.557h-.682zM5.637 9.761H4.379V7.785h1.436v-.368a.386.386 0 0 0-.383-.385h-2.24a115.436 115.436 0 0 1 .347-1.018 1.187 1.187 0 0 0-.68.199.908.908 0 0 0-.385.551c-.151.416-.296.813-.368 1.05-.136.38-.466 1.048-.466 1.048.248-.002.493-.06.716-.169a1.205 1.205 0 0 0 .575-.822c0-.027 0-.053.024-.086h.65V9.35c0 .142 0 .279-.018.412H2.433a.754.754 0 0 0-.754.754h1.837a4.955 4.955 0 0 1-.226 1.035 4.746 4.746 0 0 1-.845 1.484 9.363 9.363 0 0 1-.89.845 1.56 1.56 0 0 0 1.527-.27 4.21 4.21 0 0 0 .908-1.623c.152-.483.258-.98.318-1.483h1.685v-.38a.362.362 0 0 0-.356-.362z"}),a.default.createElement("path",{fill:"#fff",d:"M4.747 11.318l-.658.425 1.418 2.118a1.96 1.96 0 0 0 .19-.629.908.908 0 0 0-.08-.617l-.87-1.297z"}),a.default.createElement("defs",null,a.default.createElement("linearGradient",{id:"id-3051037867-a",x1:"-6.708",x2:"25.504",y1:"29.91",y2:"-8.476",gradientUnits:"userSpaceOnUse"},a.default.createElement("stop",{offset:".42",stopColor:"#06F"}),a.default.createElement("stop",{offset:".92",stopColor:"#00C4FF"}))))};t.default=o},1497:function(e,t,n){"use strict";var a=n(8),r=n(11),i=n(9),o=n(10),c=n(4),s=n(1),u=n(2),l=n.n(u),d=n(14),h=n.n(d),p=n(52),f=n(23),g=n(231),m=n(0),b=n(45),v=n(18),C=n(21),A=n(193),E=n(25),S=n(1061),w=n(352),y=n(19),O=n(391),j=n(112),I=n(906),B=n(1215),R=n(1068),k=n(802),T=n(27),N=n(3),Q=n.n(N),D=n(1310),P=n(1277),M=n(1018);function V(){var e=Object(k.a)([""," 秒后可重发"]);return V=function(){return e},e}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var F=function(e){Object(i.a)(n,e);var t=U(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.countDownEvent,a=t.countDownEndEvent,r=t.startAtOnce,i=t.interceptTime,o=t.isEmail,c=t.reStartTime,u=t.smsType,l=Object(T.a)(t,["countDownEvent","countDownEndEvent","startAtOnce","interceptTime","isEmail","reStartTime","smsType"]);return e=o?"邮箱":"voice"===u?"语音":"短信",Object(s.c)("div",{className:"SignFlow SignFlow-smsInputContainer",children:[Object(s.b)(M.a,Object.assign({name:"digits",className:"SignFlow-smsInput",type:"number",smsType:u,errorMessageClassName:"SignFlow-smsInputErrorMessage",placeholder:"输入 6 位".concat(e,"验证码"),validations:[{type:"required",message:"请输入".concat(e,"验证码"),className:"SignFlow-smsInputRequiredErrorMask"}]},l)),Object(s.b)(D.a,{className:"SignFlow-smsInputButton",preset:"plain",initialText:"获取".concat(e,"验证码"),resetText:"重新获取".concat(e,"验证码"),countingText:Object(P.a)(V(),"count"),startAtOnce:r,event:n,countDownEndEvent:a,interceptTime:i,reStartTime:c})]})}}]),n}(u.Component);F.propTypes={countDownEvent:Q.a.func.isRequired,startAtOnce:Q.a.bool,interceptTime:Q.a.number,reStartTime:Q.a.number,isEmail:Q.a.bool,countDownEndEvent:Q.a.func,smsType:Q.a.string},F.defaultProps={startAtOnce:!1,isEmail:!1};var x=F,z=n(1091),L=n(1092),q=n(37),H=n.n(q);function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var W={phoneNoError:null,fullnameError:null,passwordError:null,digitsError:null},K=function(e){Object(i.a)(n,e);var t=J(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).handleCountDownEndEvent=function(){r.setState({smsBackUpDisplay:!0})},r.handleChange=function(e){return function(t){r.setState(Object(m.a)({},e,t))}},r.testPhoneNo=function(){var e=r.state,t=e.selectedCountry.code,n=e.phoneNo;return"+86"!==t||/^\d{11}$/.test(n)},r.handleBackUpDigits=function(){r.setState({smsType:"text"===r.state.smsType?"voice":"text",reStartTime:Date.now()})},r.sendDigits=function(){var e=r.props,t=e.sendDigits,n=e.validateRegisterForm;(0,e.resetRegisterValidateResult)();var a=r.state,i=a.phoneNo,o=a.selectedCountry,c=a.smsType,s="".concat(o.code).concat(i);n({phoneNo:s}).then((function(e){if(e.payload.success)return r.setState({smsBackUpDisplay:!1}),void t(s,c);r.setState({smsInputInterceptTime:Date.now()})}))},r.runBeforeCheckCaptcha=function(e){var t=r.state.captcha,n=r.props,a=n.captchaNeeded,i=n.checkCaptcha;if(!r.captchaValidated&&a)return t?void i(t,r.captchaIsChinese?"cn":"en").then((function(t){t.payload.success&&(r.captchaValidated=!0,e())})):void r.setState({validationResult:{message:r.captchaIsChinese?"请点击图中倒立的文字":"请输入验证码",needsRefresh:!1,timestamp:Date.now()},smsInputInterceptTime:Date.now()});e()},r.runBeforeResetValidateResult=function(e){r.props.resetRegisterValidateResult(),r.setState({customErrorInputMap:Object.assign({},W),validationResult:{needsRefresh:!1,timestamp:Date.now()}},(function(){e()}))},r.handleSendDigits=function(){f.a.trackEvent(Object(b.a)(r),{id:4940}),r.runBeforeResetValidateResult((function(){var e=r.state.phoneNo;r.testPhoneNo()?r.runBeforeResetValidateResult((function(){r.runBeforeCheckCaptcha((function(){r.sendDigits()}))})):r.setState({customErrorInputMap:Object.assign({},r.state.customErrorInputMap,{phoneNoError:e?"请输入正确的手机号":"请输入手机号"}),smsInputInterceptTime:Date.now()})}))},r.parseErrorMessages=function(){var e=r.props,t=e.registerValidateErrors,n=void 0===t?{}:t,a=e.onChangeToSigin,i=n.phoneNo,o=void 0===i?{}:i,c=n.fullname,u=void 0===c?{}:c,l=n.password,d=void 0===l?{}:l,h=n.username,p=void 0===h?"":h,f=o.code,g=o.message;return{phoneNoError:f===y.s?Object(s.c)("span",{children:["该手机号已注册 · ",Object(s.b)(E.c,{preset:"plain",style:{color:"#3f3f3f"},onClick:function(){a()},children:"直接登录"})]}):g,fullnameError:u.message,passwordError:d.message,usernameError:p}},r.handlePhoneNumberFormSubmit=function(e){f.a.trackEvent(Object(b.a)(r),{id:4942}),r.runBeforeCheckCaptcha((function(){r.runBeforeResetValidateResult((function(){var t=e.digits,n=r.props,a=n.validateDigits,i=n.onSetShowHeader,o=r.state,c=o.phoneNo,s=o.selectedCountry;c&&t&&a("".concat(s.code).concat(c),t).then((function(e){e.payload.success?r.setState({digitsValidated:!0},(function(){i(!1)})):r.setState({customErrorInputMap:Object.assign({},r.state.customErrorInputMap,{digitsError:"验证码填写错误"})})}))}))}))},r.handleSetNameFormSubmit=function(e){r.runBeforeCheckCaptcha((function(){r.runBeforeResetValidateResult((function(){var t=r.state,n=t.phoneNo,a=t.digits,i=t.password,o=t.fullname,c=t.selectedCountry,s=r.props,u=s.confirmRegister,l=s.validateRegister,d=s.nextUrl,h={phoneNo:"".concat(c.code).concat(n),password:i,digits:a,fullname:o},p=Object(A.d)(d),f=p.utm_source,g=p.utm_medium;l(h).then((function(t){t.payload.success&&u({phoneNo:"".concat(c.code).concat(n),digits:a,password:i,fullname:o||e.fullname,registerType:"phone_digits",source:"com.zhihu.web",utmSource:f,refSource:g})}))}))}))},r.state={fullname:"",password:"",captcha:"",phoneNo:"",digits:"",smsType:"text",digitsValidated:!1,smsBackUpDisplay:!0,selectedCountry:{name:"中国",code:"+86"},validationResult:{},customErrorInputMap:Object.assign({},W),smsInputInterceptTime:-1,reStartTime:Date.now()},r.captchaIsChinese=Math.random()<.5,r}return Object(r.a)(n,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.captchaValidationMessage,a=t.registerConfirmSucceeded,r=t.sendDigitsError,i=t.isInSignPage,o=t.nextUrl,c=e.captchaValidationMessage,s=e.registerConfirmSucceeded,u=e.sendDigitsError;if(!a&&s){var l=this.state,d=l.selectedCountry.code,h=l.phoneNo;return f.a.trackEvent(this,{action:"StatusReport",id:234},{status:{result:"Success",event:{action:"SignUp",element:"Button"}},account:{phone:"".concat(d).concat(h),type:"Zhihu"}}),void(o?location.href=o:i?location.href="/":location.reload())}if(!r&&u||a!==s&&!1===s){var p={};!r&&u&&(p={smsInputInterceptTime:Date.now(),smsBackUpDisplay:!0},this.captchaValidated=!1),this.setState(Object.assign({},p,{validationResult:{message:r,needsRefresh:!0,timestamp:Date.now()}}))}!n&&c&&this.setState({smsInputInterceptTime:Date.now(),validationResult:{message:c,needsRefresh:Boolean(c),timestamp:Date.now()}})}},{key:"render",value:function(){var e=this,t=this.state,n=t.phoneNo,a=t.smsType,r=t.password,i=t.reStartTime,o=t.digitsValidated,c=t.validationResult,l=t.smsBackUpDisplay,d=t.customErrorInputMap,p=t.smsInputInterceptTime,g=this.props,m=g.sendDigitsError,b=g.onSetShowHeader,v=this.parseErrorMessages(),C=v.phoneNoError,A=v.fullnameError,w=v.passwordError,y=v.usernameError,O=d.phoneNoError,j=d.digitsError;return Object(s.b)("div",{className:"Register",children:o?Object(s.c)("div",{className:"Register-padName",children:[Object(s.c)("div",{className:"Register-padNameHeader",children:[Object(s.b)(E.c,{onClick:function(){e.setState({digitsValidated:!1},(function(){b(!0)}))},children:Object(s.b)(S.a,{size:30})}),Object(s.b)("span",{className:"Register-padNameTitle",children:"设置用户名和密码"})]}),Object(s.c)(I.b,{onSubmit:this.handleSetNameFormSubmit,children:[Object(s.b)(L.a,{name:"fullname",placeholder:"用户名",onChange:this.handleChange("fullname"),manualValidateError:A}),Object(s.b)(z.a,{defaultValue:r,onChange:this.handleChange("password"),manualValidateError:w}),Object(s.b)(E.c,{className:"Register-getIn",type:"submit",preset:"primary",color:"blue",children:"进入知乎"})]})]}):Object(s.b)(u.Fragment,{children:Object(s.c)("div",{className:"Register-content",children:[Object(s.c)(I.b,{onSubmit:this.handlePhoneNumberFormSubmit,children:[Object(s.b)(R.a,{type:"register",onChange:this.handleChange("phoneNo"),onSelect:this.handleChange("selectedCountry"),manualValidateError:C||O||y}),Object(s.b)(B.a,{className:"SignFlow-captchaContainer Register-captcha",type:"register",isChinese:this.captchaIsChinese,canCaptchaShown:Boolean(n),onUpdateInput:this.handleChange("captcha"),validationResult:c}),Object(s.c)("div",{className:"Register-SMSInput",children:[Object(s.b)(x,{smsType:a,reStartTime:i,onChange:this.handleChange("digits"),countDownEvent:this.handleSendDigits,countDownEndEvent:this.handleCountDownEndEvent,interceptTime:p,manualValidateError:j||m}),Object(s.b)("div",{className:h()("Register-smsBackUp",{"Register-hiddenSmsBackUp":!l}),children:Object(s.c)("span",{onClick:this.handleBackUpDigits,children:["接收","text"===a?"语音":"短信","验证码"]})})]}),Object(s.b)(E.c,{className:"Register-submitButton",preset:"primary",color:"blue",type:"submit",children:"注册"})]}),Object(s.c)("div",{className:"Register-footer",children:[Object(s.c)("span",{className:"Register-declaration",children:["注册即代表同意",Object(s.b)("a",{href:"//".concat(H.a.wwwHost,"/term/zhihu-terms"),children:"《知乎协议》"}),Object(s.b)("a",{href:"//".concat(H.a.wwwHost,"/term/privacy"),children:"《隐私保护指引》"})]}),Object(s.b)("a",{className:"Register-org",href:"//".concat(H.a.wwwHost,"/org/signup"),onClick:function(e){return f.a.trackEvent(e.currentTarget,{id:4943})},children:"注册机构号"})]})]})})})}}]),n}(u.Component),Y=(Object(v.compose)(Object(w.b)((function(){return{module:"SignUpForm",view:{id:233},trackCardShow:!0}})),Object(C.connect)((function(e){var t=e.captcha,n=t.captchaNeeded,a=t.captchaValidationMessage,r=e.register;return{captchaNeeded:n,sendDigitsError:r.sendDigitsError,registerValidateErrors:r.registerValidateErrors,captchaValidationMessage:a,registerConfirmSucceeded:r.registerConfirmSucceeded}}),{sendDigits:O.e,checkCaptcha:j.b,validateDigits:O.g,confirmRegister:O.a,validateRegister:O.h,validateRegisterForm:O.i,resetRegisterValidateResult:O.d}))(K),n(1334),n(131)),Z=n.n(Y),G=n(365),_=n(20),X=n(1442),$=n.n(X),ee="c3cef7c66a1843f8b3a9e6a1e3160e20";"".concat("z_").concat("c0"),"".concat("SZYUpkoc0tvY").concat("Xh0V2E2UTB").concat("UID096dwe");var te=function(e,t){var n=Date.now(),a=new $.a("SHA-1","TEXT");return a.setHMACKey("d1b964811afb40118a12068ff74a12f4","TEXT"),a.update(e),a.update(ee),a.update("com.zhihu.web"),a.update(String(n)),Object.assign({clientId:ee,grantType:e,timestamp:n,source:"com.zhihu.web",signature:a.getHMAC("HEX")},t)};function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var ae={phoneNoError:null,fullnameError:null,digitsError:null},re=function(e){Object(i.a)(n,e);var t=ne(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={fullname:e.props.defaultFullname||"",avatarPath:"",phoneNo:"",digits:"",captcha:"",isRegister:null,smsBackUpDisplay:!0,smsType:"text",selectedCountry:{name:"中国",code:"+86"},smsInputInterceptTime:-1,reStartTime:-1,customErrorInputMap:Object.assign({},ae),validationResult:{}},e.captchaIsChinese=Math.random()<.5,e.getSocialInfo=function(t){var n=t||e.props,a=n.getSocialInfo,r=n.socialType;r&&a(r).then((function(t){var n=t.payload,a=n.name,r=n.profileImageUrl;e.setState({avatarPath:r.split("/").reverse()[0],fullname:a})}))},e.testPhoneNo=function(){var t=e.state,n=t.selectedCountry.code,a=t.phoneNo;return"+86"!==n||/^\d{11}$/.test(a)},e.handleChange=function(t){return function(n){e.setState(Object(m.a)({},t,n))}},e.handleBackUpDigits=function(){e.setState({smsType:"text"===e.state.smsType?"voice":"text",reStartTime:Date.now()})},e.handleCountDownEndEvent=function(){e.setState({smsBackUpDisplay:!0})},e.parseServerError=function(t){var n=t||e.props,a=n.showNotification,r=n.registerValidateErrors,i=n.loginConfirmError,o=n.registerConfirmError,c=n.sendDigitsError,s=i||{},u=s.username,l=s.password,d=s.digits,h=s.captcha,p=o||{},f=p.username,g=p.password,m=p.digits,b=p.undefined;b&&a(b,"red");var v=c||{},C=v.username,A=v.captcha,E=(r||{}).fullname;return{usernameServerError:u||C,passwordServerError:l||g,digitsServerError:d||m,captchaServerError:h||A,fullnameServerError:(E=void 0===E?{}:E).message||f}},e.runBeforeCheckCaptcha=function(t){var n=e.state.captcha,a=e.props,r=a.captchaNeeded,i=a.checkCaptcha;if(!e.captchaValidated&&r)return n?void i(n,e.captchaIsChinese?"cn":"en").then((function(n){n.payload.success&&(e.captchaValidated=!0,t())})):void e.setState({validationResult:{message:e.captchaIsChinese?"请点击图中倒立的文字":"请输入验证码",needsRefresh:!1,timestamp:Date.now()},smsInputInterceptTime:Date.now()});t()},e.runBeforeResetValidateResult=function(t){e.setState({customErrorInputMap:Object.assign({},ae),validationResult:{needsRefresh:!1,timestamp:Date.now()}},(function(){t()}))},e.handleSendDigits=function(){var t=e.state.phoneNo;t&&e.testPhoneNo()?e.runBeforeCheckCaptcha((function(){e.runBeforeCheckCaptcha(e.sendDigits)})):e.setState({customErrorInputMap:Object.assign({},e.state.customErrorInputMap,{phoneNoError:t?"请输入正确的手机号":"请输入手机号"}),smsInputInterceptTime:Date.now()})},e.sendDigits=function(){var t=e.state,n=t.selectedCountry,a=t.phoneNo,r=t.smsType,i=e.props.sendLoginDigits;e.props.validateRegisterForm({phoneNo:"".concat(n.code).concat(a)}).then((function(t){var o=t.payload;e.setState({smsBackUpDisplay:!1,isRegister:!(o.phoneNo&&o.phoneNo.code===y.s)}),i("".concat(n.code).concat(a),r)}))},e.handleSumbit=function(){e.runBeforeCheckCaptcha((function(){e.runBeforeResetValidateResult((function(){var t=e.state,n=t.selectedCountry,a=t.phoneNo,r=t.digits,i=t.isRegister,o=t.fullname,c=t.avatarPath,s=e.props,u=s.validateAndLogin,l=s.validateAndRegister,d=s.nextUrl,h=s.socialType,p=Object(A.d)(d),f=p.utm_source,g=p.utm_medium;i?l(Object.assign({source:"com.zhihu.web",registerType:"phone_digits",phoneNo:"".concat(n.code).concat(a),fullname:o,digits:r,refSource:g,utmSource:f},c&&{avatarPath:c},h&&{socialRegisterType:h})):u(te("digits",{username:"".concat(n.code).concat(a),digits:r,refSource:g,utmSource:f}))}))}))},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){if(Z.a.get("atoken")){this.getSocialInfo();var e=Z.a.get("accountcallback");if(!this.state.fullname&&e){var t=JSON.parse(decodeURIComponent(e));this.setState({fullname:t.fullname})}}else this.props.onResetRegister()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.nextUrl,a=t.socialType,r=t.defaultFullname,i=t.sendDigitsError,o=t.loginConfirmError,c=t.loginConfirmSucceeded,s=t.registerConfirmSucceeded,u=t.captchaValidationMessage,l=e.socialType,d=e.defaultFullname,h=e.sendDigitsError,p=e.loginConfirmError,f=e.loginConfirmSucceeded,g=e.registerConfirmSucceeded,m=e.captchaValidationMessage;if(!a&&l&&this.getSocialInfo(e),r!==d&&this.setState({fullname:d}),!c&&f||!s&&g)n?location.href=n:location.reload();else{if(!o&&p&&p.validateDigitsError&&this.setState({customErrorInputMap:Object.assign({},this.state.customErrorInputMap,{digitsError:p.validateDigitsError}),smsInputInterceptTime:Date.now()}),!i&&h){var b=this.parseServerError(e).captchaServerError;this.setState({validationResult:{message:b,needsRefresh:!0,timestamp:Date.now()},smsInputInterceptTime:Date.now()})}!u&&m&&this.setState({smsInputInterceptTime:Date.now(),validationResult:{message:m,needsRefresh:Boolean(m),timestamp:Date.now()}})}}},{key:"render",value:function(){var e=this.state,t=e.smsInputInterceptTime,n=e.customErrorInputMap,a=e.smsBackUpDisplay,r=e.validationResult,i=e.reStartTime,o=e.isRegister,c=e.phoneNo,u=e.smsType,l=e.fullname,d=this.props.onResetRegister,p=n.phoneNoError,f=n.digitsError,g=this.parseServerError(),m=g.usernameServerError,b=g.fullnameServerError,v=g.digitsServerError;return Object(s.c)(I.b,{className:"Register-content",onSubmit:this.handleSumbit,children:[Object(s.b)("div",{className:"Register-socialHeader",children:Object(s.c)("div",{className:"Register-socialTitle",children:[Object(s.b)(E.c,{onClick:d,children:Object(s.b)(S.a,{size:30})}),"绑定手机号"]})},"header"),Object(s.b)(L.a,{className:h()("Register-socialName",{"Register-hiddenSocialName":!o}),name:"fullname",placeholder:"用户名",value:l,onChange:this.handleChange("fullname"),manualValidateError:b,validations:[]},"fullname"),Object(s.b)(R.a,{type:"register",onChange:this.handleChange("phoneNo"),onSelect:this.handleChange("selectedCountry"),manualValidateError:p||m}),Object(s.b)(B.a,{className:"SignFlow-captchaContainer",type:"register",isChinese:this.captchaIsChinese,canCaptchaShown:Boolean(c),onUpdateInput:this.handleChange("captcha"),validationResult:r}),Object(s.b)(x,{smsType:u,reStartTime:i,onChange:this.handleChange("digits"),countDownEvent:this.handleSendDigits,countDownEndEvent:this.handleCountDownEndEvent,interceptTime:t,manualValidateError:f||v}),Object(s.b)("div",{className:h()("Register-smsBackUp",{"Register-hiddenSmsBackUp":!a}),children:Object(s.c)("span",{onClick:this.handleBackUpDigits,children:["接收","text"===u?"语音":"短信","验证码"]})}),Object(s.b)(E.c,{className:"Register-submitButton",type:"submit",preset:"primary",color:"blue",children:"进入知乎"})]})}}]),n}(u.Component),ie=Object(C.connect)((function(e){var t=e.captcha,n=t.captchaNeeded,a=t.captchaValidationMessage,r=e.register,i=r.registerConfirmError,o=r.registerValidateErrors,c=r.registerConfirmSucceeded,s=e.login,u=s.loginConfirmSucceeded,l=s.validateDigitsError,d=s.loginConfirmError;return{captchaNeeded:n,sendDigitsError:s.sendDigitsError,registerConfirmError:i,registerValidateErrors:o,captchaValidationMessage:a,registerConfirmSucceeded:c,loginConfirmSucceeded:u,validateDigitsError:l,loginConfirmError:d}}),{showNotification:_.h,checkCaptcha:j.b,validateDigits:G.i,sendLoginDigits:G.g,validateAndLogin:G.h,validateAndRegister:O.f,getSocialInfo:O.c,validateRegisterForm:O.i,resetLoginValidateResult:G.f,resetRegisterValidateResult:O.d})(re),oe=n(31),ce=n(53),se=n(1220),ue=n(24),le=function(e){var t=e.onBack,n=e.data,a=n.phoneNo,r=n.code,i=n.targetNo,o=e.onSubmit;return Object(s.c)("div",{className:"SMSIdentify",children:[Object(s.c)("div",{className:"SMSIdentify-back",onClick:t,children:[Object(s.b)(S.a,{fill:"#8590a6",size:36,center:!0}),"返回"]}),Object(s.b)("div",{className:"SMSIdentify-title",children:"身份验证"}),Object(s.c)("div",{className:"SMSIdentify-tip",children:["请用手机号 ",a.slice(0,-8),"****",a.slice(-4)," 发送短信"]}),Object(s.c)("div",{className:"SMSIdentify-content",children:[Object(s.c)("div",{children:["短信内容",Object(s.b)("span",{children:r})]}),Object(s.c)("div",{children:["发送到号码",Object(s.b)("span",{children:i})]})]}),Object(s.b)("div",{className:"SMSIdentify-submitTip",children:"发送完成后，请点击下方按钮进行校验"}),Object(s.b)(E.c,{className:"SMSIdentify-submit",preset:"primary",color:"blue",onClick:o,children:"我已发送"})]})},de=Object(C.connect)(null,{getSMSIdentify:G.d,postSMSIdentify:G.e,showNotification:_.h})((function(e){var t=e.getSMSIdentify,n=e.postSMSIdentify,a=e.showNotification,r=e.onBack,i=e.phoneNo,o=Object(u.useState)({code:"",phoneNo:"",targetNo:""}),c=Object(ue.a)(o,2),l=c[0],d=c[1];Object(u.useEffect)((function(){f.a.trackCardShow(null,{id:5935})}),[]),Object(u.useEffect)((function(){i&&t(i).then((function(e){var t=e.payload;t&&d(t)})).catch((function(e){var t=e.payload;t&&d(t)}))}),[t,i]);var h=le;return Object(s.b)(h,{onBack:r,onSubmit:function(){f.a.trackEvent(null,{id:23456}),n(i).then((function(e){var t=e.payload;f.a.trackEvent(null,{id:6729,action:"Click",name:t.success?"通过":"失败"}),t.success?r():a("没有收到短信，请稍后重试","red")}))},data:l})}));function he(e,t){if(!e)return{};var n,a=e=e.trim(),r=Object(se.a)(e);if(!r){var i={hasCode:(n=e).startsWith("+")||n.startsWith("00"),parsedPhoneNo:n.startsWith("00")?"+".concat(n.slice(2)):n};a=i.hasCode?i.parsedPhoneNo:"".concat(t).concat(e)}return{value:a,isEmail:r}}var pe={sina:"Weibo",qq:"QQ",wechat:"Wechat"};function fe(e,t,n,a){f.a.trackEvent(e,{action:t,element:"Button",element_name:a},{account:n})}function ge(e,t,n,a){f.a.trackEvent(e,{id:236,action:"StatusReport",element_name:a},{status:{result:"Success",event:{action:t,element:"Button"}},account:n})}var me=n(410),be=n(359),ve=n(130),Ce=n(1443),Ae=n.n(Ce),Ee=n(1444),Se=n.n(Ee),we=n(1445),ye=n.n(we);function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var je={1:"a",2:"b",3:"c"};var Ie=function(e){Object(i.a)(n,e);var t=Oe(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).cancelCheckQrcodeScanStatus=function(){r.timer&&window.clearInterval(r.timer)},r.checkQrcodeScanStatus=function(e){var t=r.props.checkQrcodeScanStatus;r.timer=setInterval((function(){t({token:e})}),2e3)},r.handleChangestatus=function(e,t){r.setState({status:e}),"init"!==e||t||r.getToken()},r.handleChangeLoginType=function(){var e=r.props.onChangeType;r.cancelCheckQrcodeScanStatus(),e()},r.initTips=function(){var e=r.props,t=e.guideType,n=e.isInSignPage,a=r.state.enableSwitchGuide,i=!n||!["2","3"].includes(t),o=a?7300:1e3;a&&(r.showSwitchGuideTimeout=setTimeout((function(){r.setState({showSwitchGuide:!0}),r.hideSwitchGuideTimeout=setTimeout((function(){r.setState({showSwitchGuide:!1})}),3e3)}),1e3)),i&&(r.showTipsTimeout=setTimeout((function(){r.setState({showTips:!0}),r.hideTipsTimeout=setTimeout((function(){r.setState({showTips:!1})}),5e3)}),o))},r.state={type:"password",status:"init",errorMessage:"",showTips:!1,showSwitchGuide:!1,enableSwitchGuide:r.props.isInSignPage&&["1","2","3"].includes(r.props.guideType),guideTypeSymbol:je[r.props.guideType]||"d"},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.isInSignPage,t=this.state.guideTypeSymbol;e&&f.a.trackCardShow(null,{id:9214,name:t}),this.getToken().then(this.initTips)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.qrcodeLoginToken,a=t.qrcodeLoginScanStatus,r=e.qrcodeLoginToken,i=e.qrcodeLoginScanStatus,o=e.qrcodeLoginError,c=e.qrcodeLoginReturnNewToken;""!==r&&n!==r?(this.cancelCheckQrcodeScanStatus(),"init"!==this.state.status&&this.handleChangestatus("init",!0),this.checkQrcodeScanStatus(r)):a!==i?2!==i&&this.handleChangestatus(1===i?"success":"init",c||1===a&&0===i):o&&o.code&&(this.cancelCheckQrcodeScanStatus(),40321===o.code&&this.setState({status:"error",errorMessage:o.message}))}},{key:"componentWillUnmount",value:function(){this.cancelCheckQrcodeScanStatus(),clearTimeout(this.showTipsTimeout),clearTimeout(this.hideTipsTimeout),clearTimeout(this.showSwitchGuideTimeout),clearTimeout(this.hideSwitchGuideTimeout)}},{key:"getToken",value:function(){return this.props.getQrcodeLoginToken()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.qrcodeLoginToken,r=t.guideType,i=t.isInSignPage,o=this.state,c=o.status,l=o.errorMessage,d=o.showTips,f=o.showSwitchGuide,g=o.enableSwitchGuide,m=o.guideTypeSymbol,b=null;return b="init"===c?Object(s.c)("div",{className:"Qrcode-content",children:[Object(s.b)("div",{className:h()("Qrcode-img",{"Qrcode-img--hover":d}),children:a?Object(s.c)(s.a,{children:[Object(s.b)("img",{className:"Qrcode-qrcode",width:"150",height:"150",src:"//".concat(H.a.wwwHost,"/api/v3/account/api/login/qrcode/").concat(a,"/image").concat(i?"?utm_campaign=internal&utm_medium=qr&utm_source=login&utm_term=force_launch&utm_content=qrscan".concat(m):""),alt:"二维码"}),Object(s.b)("img",{className:"Qrcode-tips",src:"https://pic1.zhimg.com/80/v2-3ca9dfefdc7ab9034c123abd69a57ae0.png"})]}):Object(s.b)(be.a,{count:3})}),"3"===r?Object(s.c)("p",{children:["使用"," ",Object(s.b)("a",{href:"https://www.zhihu.com/app/",target:"_blank",rel:"noopener noreferrer",children:"知乎 App"})," ","| 微信 扫一扫登录"]}):Object(s.c)(s.a,{children:[Object(s.c)("p",{children:["打开",Object(s.c)("a",{href:"https://www.zhihu.com/app/",target:"_blank",rel:"noopener noreferrer",children:[" ","知乎 App"]})]}),Object(s.b)("p",{children:"在「我的」页面顶部打开扫一扫"}),Object(s.b)("p",{children:"如扫码异常请下载最新版客户端"})]})]}):"success"===c?Object(s.c)(u.Fragment,{children:[Object(s.c)("div",{className:"Qrcode-content",children:[Object(s.b)("div",{className:"Qrcode-scanResultStaus",children:Object(s.b)(Ae.a,{fill:"#2db370",size:58})}),Object(s.b)("p",{className:"Qrcode-scanResultTips",children:"扫描成功"}),Object(s.b)("p",{children:"请在手机上「确认登录」"})]}),Object(s.b)("div",{className:"Qrcode-cutButton",children:Object(s.b)("span",{onClick:function(){return e.handleChangestatus("init")},children:"返回二维码"})})]}):Object(s.c)("div",{className:"Qrcode-content Qrcode-failure",children:[Object(s.b)("div",{children:Object(s.b)(Se.a,{fill:"#ffaa00",size:58})}),Object(s.b)("p",{children:l})]}),Object(s.c)("div",{className:h()("Qrcode-container",n),children:[g&&Object(s.b)(p.a,{color:"GBL01A",fontSize:"14px",height:"40px",width:"260px",mt:"-24px",mx:"auto",mb:"15px",css:function(e){return{textAlign:"center",lineHeight:"40px",backgroundColor:e.colorMod(e.colors.GBL01A).alpha(.1),borderRadius:"20px",borderTopRightRadius:"0",transformOrigin:"top right",transform:"scale(".concat(f?"1":"0",")"),opacity:f?"1":"0",transition:"transform 300ms cubic-bezier(0.4, 0, 0.2, 1), opacity 300ms linear"}},children:"点击使用手机号、帐号密码登录"}),Object(s.b)("div",{className:"Qrcode-title",children:"扫码登录"}),b,Object(s.b)(ye.a,{onClick:this.handleChangeLoginType})]})}}]),n}(u.Component);Ie.propTypes={type:Q.a.string,isShowPasswordLogin:Q.a.bool,onChangeType:Q.a.func,getQrcodeLoginToken:Q.a.func,checkQrcodeScanStatus:Q.a.func,isInSignPage:Q.a.bool},Ie.defaultProps={qrcodeLoginToken:"",qrcodeLoginScanStatus:""};var Be=Object(v.compose)(oe.withRouter,Object(C.connect)((function(e){var t=e.login;return{qrcodeLoginToken:t.qrcodeLoginToken,qrcodeLoginTokenExpires:t.qrcodeLoginTokenExpires,qrcodeLoginScanStatus:t.qrcodeLoginScanStatus,qrcodeLoginError:t.qrcodeLoginError,qrcodeLoginReturnNewToken:t.qrcodeLoginReturnNewToken,edition:Object(ve.b)(e),guideType:Object(ve.a)(e,"web_login")}}),{getQrcodeLoginToken:G.c,checkQrcodeScanStatus:G.a}))(Ie),Re=n(1345),ke=n.n(Re);function Te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var Ne={username:null,password:null,captcha:null,digits:null};var Qe=function(e){Object(i.a)(n,e);var t=Te(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={smsType:"text",smsBackUpName:"语音",smsBackUpDisplay:!0,reStartTime:-1,supportedCountriesShown:!1,captcha:"",selectedCountry:r.props.selectedCountry,username:r.props.username,password:r.props.password,fullname:"",customErrorInputMap:Object.assign({},Ne),validationResult:{},smsInputInterceptTime:-1,submitDisabled:!1},r.checkAllInputFilled=function(){if(r.allInputFilled)return r.allInputFilled;var e=r.props.type,t=r.state,n=t.username,a=t.password;return r.allInputFilled="digits"===e?Boolean(n):Boolean(n)&&Boolean(a),r.allInputFilled},r.handleChange=function(e,t){r.props.resetLoginValidateResult(),r.setState(Object(m.a)({},e,t))},r.handleChangeType=function(e){var t=r.props,n=t.type,a=t.onChangeType;(0,t.resetLoginValidateResult)(),a(e),"qrcode"!==e&&"password"!==e||f.a.trackEvent(Object(b.a)(r),{action:"Click",name:"qrcode"===e?"使用二维码登录":"使用密码登录"},{account:{type:"Zhihu"}}),"qrcode"!==e&&(r.setState((function(e){var t=e.username;return{username:"password"===n&&Object(se.a)(t)?"":t,smsBackUpDisplay:!0}})),f.a.trackEvent(Object(b.a)(r),{action:"Switch",element:"Button"},{account:{type:"Zhihu"}}))},r.handleChangeSmsType=function(e){f.a.trackEvent(e.currentTarget,{id:4941}),r.setState((function(e){var t=e.smsType;return{smsType:"text"===t?"voice":"text",smsBackUpName:"text"===t?"短信":"语音",reStartTime:Date.now()}}))},r.handleCountDownEndEvent=function(){r.setState({smsBackUpDisplay:!0})},r.testPhoneNo=function(){var e=r.state,t=e.selectedCountry.code,n=e.username;return"+86"!==t||/^\d{11}$/.test(n)},r.handleSendDigits=function(){r.runBeforeResetValidateResult((function(){var e=r.props,t=e.validateSendDigits,n=e.captchaNeeded,a=e.resetLoginValidateResult,i=r.state,o=i.username,c=i.selectedCountry.code,s=i.captcha,u=i.customErrorInputMap,l=i.validationResult,d=i.smsType;if(a(),r.testPhoneNo()){if(o&&(!n||s))return t({username:he(o,c).value,captcha:s,smsType:d,type:"login",lang:r.captchaIsChinese?"cn":"en"}),void r.setState({smsBackUpDisplay:!1});var h=n&&!s?{message:r.captchaIsChinese?"请点击图中倒立的文字":"请输入验证码",needsRefresh:!1,timestamp:Date.now()}:Object.assign({},l);r.setState({customErrorInputMap:Object.assign({},u,{username:o?"":"请输入手机号"}),smsInputInterceptTime:Date.now(),validationResult:h}),r.handleLogSubmitValidateError({username:o?"":"请输入手机号",captcha:n&&!s?"请输入验证码":""})}else r.setState({customErrorInputMap:Object.assign({},r.state.customErrorInputMap,{username:o?"请输入正确的手机号":"请输入手机号"}),smsInputInterceptTime:Date.now()})}))},r.handleSupportedCountriesShown=function(e){r.setState((function(t){var n=t.supportedCountriesShown;return{supportedCountriesShown:e||!n}}))},r.runBeforeResetValidateResult=function(e){r.props.resetLoginValidateResult(),r.setState({customErrorInputMap:Object.assign({},Ne),validationResult:{needsRefresh:!1,timestamp:Date.now()}},(function(){e()}))},r.runBeforeCheckCaptcha=function(){var e=r.props,t=e.captchaValidated,n=e.captchaNeeded,a=e.checkCaptcha;if(!t&&n){var i=r.state.captcha;return i?a(i,r.captchaIsChinese?"cn":"en").then((function(e){return e.payload.success})):(r.setState({validationResult:{message:r.captchaIsChinese?"请点击图中倒立的文字":"请输入验证码",needsRefresh:!1,timestamp:Date.now()},smsInputInterceptTime:Date.now()}),Promise.resolve(!1))}return Promise.resolve(!0)},r.handleSubmit=function(e){f.a.trackEvent(Object(b.a)(r),{id:4948}),r.runBeforeResetValidateResult((function(){var t=r.props,n=t.type,a=t.passwordType;if("digits"!==n&&"oversea"!==a||r.testPhoneNo()){var i=function(){var t=r.props,n=t.validateAndLogin,a=t.type,i=t.nextUrl,o=r.state,c=o.selectedCountry,s=o.captcha,u=Object(A.d)(i),l=u.utm_source,d=u.utm_medium,h=Object.assign({},e,{username:he(e.username,c.code).value,captcha:s,lang:r.captchaIsChinese?"cn":"en",utmSource:l,refSource:d});n(te(a,h))};r.continueAction=i,r.setState({submitDisabled:!0}),r.runBeforeCheckCaptcha().then((function(e){return e&&i()})).finally((function(){return r.setState({submitDisabled:!1})}))}else r.setState({customErrorInputMap:Object.assign({},r.state.customErrorInputMap,{username:r.state.username?"请输入正确的手机号":"请输入手机号"}),smsInputInterceptTime:Date.now()})}))},r.parseServerError=function(e){var t=e||r.props,n=t.loginConfirmError,a=t.sendDigitsError,i=t.showNotification,o=t.registerValidateErrors,c=n||{},s=c.username,u=c.password,l=c.digits,d=c.captcha,h=c.undefined,p=c.validateDigitsError,f=o||{},g=f.fullname,m=(g=void 0===g?{}:g).message,b=f.password,v=(b=void 0===b?{}:b).message,C=a||{},A=C.username,E=C.undefined;return(h||E)&&i(h||E,"red"),{usernameServerError:A||s,passwordServerError:u||v,digitsServerError:l||p,captchaServerError:d,fullnameError:m}},r.handleResetPassword=function(e){f.a.trackEvent(e.currentTarget,{id:4947});var t=r.props.onClose;f.a.trackEvent(Object(b.a)(r),{action:"Click",element:"Button",element_name:"ResetPassword"}),t&&t(),window.open("".concat(y.E,"/account/password_reset"),"_blank")},r.handleLogSubmit=function(){fe(Object(b.a)(r),"SignIn",r.buildZAAccount(),"digits"===r.props.type?"SMSSignIn":null)},r.handleLogSubmitValidateError=function(e){!function(e,t,n,a,r){var i="object"==typeof a?Object.keys(a).map((function(e){return"object"==typeof a[e]?a[e].message:a[e]})):[a];f.a.trackEvent(e,{action:"StatusReport",element_name:r},{status:{result:"Fail",error_msg:i,event:{action:t,element:"Button"}},account:n})}(Object(b.a)(r),"SignIn",r.buildZAAccount(),e,"digits"===r.props.type?"SMSSignIn":null)},r.trackOtherLoginButtonClick=function(e){var t=e.currentTarget,n=t.textContent;f.a.trackEvent(t,{id:4949},{button:{text:n}})},r.handleSetting=function(e){return function(t){r.setState(Object(m.a)({},e,t))}},r.handleRegister=function(){var e=function(){var e=r.state,t=e.selectedCountry.code,n=e.username,a=e.fullname,i=e.digits,o=e.password;r.props.validateAndRegister({source:"com.zhihu.web",registerType:"phone_digits",phoneNo:"".concat(t).concat(n),fullname:a,digits:i,password:o})};r.continueAction=e,r.setState({submitDisabled:!0}),r.runBeforeCheckCaptcha().then((function(t){return t&&e()})).finally((function(){return r.setState({submitDisabled:!1})}))},r.captchaIsChinese=Math.random()<.5,r}return Object(r.a)(n,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.sendDigitsError,a=t.captchaValidationMessage,r=t.registerConfirmSucceeded,i=t.loginConfirmSucceeded,o=t.isInSignPage,c=t.nextUrl,s=e.sendDigitsError,u=e.captchaValidationMessage,l=e.registerConfirmSucceeded,d=e.loginConfirmSucceeded,h=e.loginConfirmError;if(!n&&s||i!==d&&!1===d){var p=!n&&s?{smsInputInterceptTime:Date.now()}:{},f=this.parseServerError(e).captchaServerError;this.setState(Object.assign({},p,{validationResult:{message:f,needsRefresh:!0,timestamp:Date.now()}})),this.handleLogSubmitValidateError(s||h)}else if(a!==u){var g=u?{smsInputInterceptTime:Date.now()}:{};this.setState(Object.assign({validationResult:{message:u,needsRefresh:Boolean(u),timestamp:Date.now()}},g)),u&&this.handleLogSubmitValidateError(u)}else(!i&&d||!r&&l)&&(Object(me.b)(this.state.username),this.handleLogSubmitSuccess(),c?location.href=c:o?location.href="/":location.reload());(u||(n||s)&&null===h)&&this.handleCountDownEndEvent()}},{key:"componentWillUnmount",value:function(){this.props.resetLoginValidateResult(),this.continueAction=null}},{key:"buildZAAccount",value:function(){var e=this.state,t=he(e.username,e.selectedCountry.code),n=t.value,a=t.isEmail;return{email:a&&n?n:null,phone:a||!n?null:n,type:"Zhihu"}}},{key:"handleLogSubmitSuccess",value:function(){ge(this,"SignIn",this.buildZAAccount(),"digits"===this.props.type?"SMSSignIn":null)}},{key:"render",value:function(){var e=this,t=this.props,n=t.type,a=t.passwordType,r=t.loginUnregisteredError,i=t.isInSignPage,o=t.captchaValidated,c=this.state,u=c.supportedCountriesShown,l=c.selectedCountry,d=c.username,p=c.password,f=c.validationResult,g=c.smsType,m=c.smsBackUpName,b=c.smsBackUpDisplay,v=c.customErrorInputMap.username,C=c.smsInputInterceptTime,A=c.reStartTime,w=c.submitDisabled,y=this.parseServerError(),O=y.usernameServerError,j=y.passwordServerError,k=y.digitsServerError,T=y.fullnameError,N=Boolean(!o)&&Object(s.b)(B.a,{className:"SignFlow-captchaContainer",canCaptchaShown:this.checkAllInputFilled(),type:"digits"===n?"digitsLogin":"login",isChinese:this.captchaIsChinese,onUpdateInput:function(t){return e.handleChange("captcha",t)},validationResult:f});return"qrcode"===n?Object(s.b)(Be,{isInSignPage:i,className:"SignInQrcode",onChangeType:function(){return e.handleChangeType("password")}}):this.props.needSMSIdentify?Object(s.b)(de,{onBack:this.props.resetLoginValidateResult,phoneNo:"".concat(l.code).concat(d)}):r&&"digits"===n?Object(s.c)(I.b,{className:"SignFlow-setting",onSubmit:this.handleRegister,onPreSubmit:this.handleLogSubmit,children:[Object(s.c)("div",{className:"SignFlow-back",onClick:this.props.resetLoginValidateResult,children:[Object(s.b)(S.a,{center:!0,size:28,fill:"#8590a6"}),"返回"]}),Object(s.b)("div",{className:"SignFlow-settingTitle",children:"设置用户名和密码"}),Object(s.b)(L.a,{name:"fullname",placeholder:"用户名",onChange:this.handleSetting("fullname"),manualValidateError:T}),Object(s.b)(z.a,{onChange:this.handleSetting("password"),defaultValue:p,placeholderPrefix:"8 位数字或字母",defaultType:"text",manualValidateError:j}),Object(s.b)(E.c,{type:"submit",className:"SignFlow-submitButton",preset:"primary",color:"blue",disabled:w,children:"进入知乎"})]},"setting"):Object(s.c)(I.b,{className:"SignFlow Login-content",onSubmit:this.handleSubmit,onPreSubmit:this.handleLogSubmit,onInvalid:this.handleLogSubmitValidateError,children:[Object(s.c)("div",{className:"SignFlow-tabs",children:[Object(s.b)("div",{className:h()("SignFlow-tab",{"SignFlow-tab--active":"digits"===n}),onClick:function(){"digits"!==n&&e.handleChangeType("digits")},children:"免密码登录"}),Object(s.b)("div",{className:h()("SignFlow-tab",{"SignFlow-tab--active":"password"===n}),onClick:function(){"password"!==n&&e.handleChangeType("password")},children:"密码登录"}),Object(s.b)("div",{className:"SignFlow-qrcodeTab",onClick:function(){e.handleChangeType("qrcode")},children:Object(s.b)(ke.a,{})})]}),Object(s.b)(R.a,{type:"digits"===n||u?"digits":"password",supportedCountriesShown:"digits"===n||"oversea"===a,onChange:function(t){return e.handleChange("username",t)},onSelect:function(t){return e.handleChange("selectedCountry",t)},defaultSelectedCountry:l,manualValidateError:O||v,defaultValue:d}),"digits"===n&&N,"digits"===n&&Object(s.b)(x,{countDownEvent:function(){return e.handleSendDigits()},countDownEndEvent:this.handleCountDownEndEvent,interceptTime:C,manualValidateError:k,smsType:g,reStartTime:A,onChange:this.handleSetting("digits")}),"password"===n&&Object(s.b)(z.a,{onChange:function(t){return e.handleChange("password",t)},manualValidateError:j,defaultValue:p}),"password"===n&&N,Object(s.c)("div",{className:"Login-options",children:[Object(s.b)(E.c,{preset:"plain",className:"Login-switchType",onClick:function(){"digits"!==n&&e.handleChangeType("email"===a?"oversea":"email")},children:"digits"===n?"":"email"===a?"海外手机号登录":"邮箱帐号登录"}),Object(s.b)(E.c,{preset:"plain",className:"Login-cannotLogin",onClick:"digits"===n?this.handleChangeSmsType:this.handleResetPassword,children:"digits"===n?b&&"接收".concat(m,"验证码"):"忘记密码？"})]}),Object(s.c)(E.c,{type:"submit",className:"SignFlow-submitButton",preset:"primary",color:"blue",disabled:w,children:["password"===n?"":"注册/","登录"]}),Object(s.b)("div",{className:"SignContainer-tip",children:Object(s.b)("div",{children:Object(s.c)("div",{children:["未注册手机验证后自动登录，注册即代表同意",Object(s.b)("a",{href:"https://www.zhihu.com/term/zhihu-terms",children:"《知乎协议》"}),Object(s.b)("a",{href:"https://www.zhihu.com/term/privacy",children:"《隐私保护指引》"})]})})})]})}}]),n}(u.Component);Qe.propTypes={validateAndLogin:Q.a.func,resetLoginValidateResult:Q.a.func,validateSendDigits:Q.a.func,loginConfirmSucceeded:Q.a.bool,loginConfirmError:Q.a.object,sendDigitsError:Q.a.object,captchaValidationMessage:Q.a.string,captchaNeeded:Q.a.bool,selectedCountry:Q.a.object,username:Q.a.string,password:Q.a.string,type:Q.a.oneOf(["password","digits","qrcode"]),onChangeType:Q.a.func},Qe.defaultProps={selectedCountry:{name:"中国",code:"+86"},username:"",password:""};var De=Object(v.compose)(Object(w.b)((function(e){return{module:"digits"===e.type?"SMSSignInForm":"SignInForm",trackCardShow:!0,view:{id:235}}})),oe.withRouter,Object(C.connect)((function(e){var t=e.captcha,n=t.captchaValidationMessage,a=t.captchaNeeded,r=t.captchaValidated,i=e.login,o=i.loginConfirmSucceeded,c=i.loginConfirmError,s=i.sendDigitsError,u=i.needSMSIdentify,l=i.loginUnregisteredError,d=e.register;return{loginConfirmSucceeded:o,loginConfirmError:c,sendDigitsError:s,loginUnregisteredError:l,captchaValidationMessage:n,captchaNeeded:a,captchaValidated:r,registerValidateErrors:d.registerValidateErrors,registerConfirmError:d.registerConfirmError,registerConfirmSucceeded:d.registerConfirmSucceeded,needSMSIdentify:u}}),{validateAndLogin:G.h,validateAndRegister:O.f,resetLoginValidateResult:G.f,validateSendDigits:G.j,showNotification:_.h,checkCaptcha:j.b,requestForCaptcha:j.f}))(Qe),Pe=n(63),Me=function(e){var t=e.captcha,n=t.captchaValidationMessage,a=t.captchaNeeded,r=t.captchaValidated,i=t.v2,o=e.login,c=o.loginConfirmSucceeded,s=o.loginConfirmError,u=o.sendDigitsError,l=o.needSMSIdentify,d=o.loginUnregisteredError,h=e.register;return{loginConfirmSucceeded:c,loginConfirmError:s,sendDigitsError:u,loginUnregisteredError:d,captchaValidationMessage:n,captchaNeeded:a,captchaValidated:r,registerValidateErrors:h.registerValidateErrors,registerConfirmError:h.registerConfirmError,registerConfirmSucceeded:h.registerConfirmSucceeded,needSMSIdentify:l,captchaV2:i}},Ve=Object(u.createContext)({}),Ue=function(e){var t=e.handleChangeType,n=e.setState,a=e.handleChange,r=e.testPhoneNo,i=e.handleSendDigits,o=e.continueActionRef,c=e.captchaV2Ref,u=e.captchaNeeded,l=e.captchaV2;return Object(s.b)(Ve.Provider,{value:{handleChangeType:t,handleChange:a,testPhoneNo:r,handleSendDigits:i,setState:n,continueActionRef:o,captchaV2Ref:c,captchaNeeded:u,captchaV2:l},children:e.children})},Fe=Ve,xe=function(e){var t=e.type,n=Object(u.useContext)(Fe).handleChangeType;return Object(s.c)("div",{className:"SignFlow-tabs",children:[Object(s.b)("div",{className:h()("SignFlow-tab",{"SignFlow-tab--active":"digits"===t}),onClick:function(){"digits"!==t&&n("digits")},children:"免密码登录"}),Object(s.b)("div",{className:h()("SignFlow-tab",{"SignFlow-tab--active":"password"===t}),onClick:function(){"password"!==t&&n("password")},children:"密码登录"}),Object(s.b)("div",{className:"SignFlow-qrcodeTab",onClick:function(){n("qrcode")},children:Object(s.b)(ke.a,{})})]})},ze=function(e){var t=e.type,n=e.isOversea,a=e.supportedCountriesShown,r=e.selectedCountry,i=e.username,o=e.usernameServerError,c=e.customErrorInputMap,l=(c=void 0===c?{}:c).username,d=Object(u.useContext)(Fe).handleChange;return Object(s.b)(R.a,{type:"digits"===t||a?"digits":"password",supportedCountriesShown:"digits"===t||n,onChange:function(e){return d("username",e)},onSelect:function(e){return d("selectedCountry",e)},defaultSelectedCountry:r,manualValidateError:o||l,defaultValue:i})},Le=function(e){var t=e.handleRegister,n=Object(u.useContext)(Fe),a=Object(C.useDispatch)(),r=n.fullnameError,i=n.password,o=n.passwordServerError,c=n.submitDisabled,l=n.setState,d=Object(Pe.c)((function(e){return function(t){return l(Object(m.a)({},e,t))}}));return Object(s.c)(I.b,{className:"SignFlow-setting",onSubmit:t,children:[Object(s.c)("div",{className:"SignFlow-back",onClick:function(){return a(G.f.apply(void 0,arguments))},children:[Object(s.b)(S.a,{center:!0,size:28,fill:"#8590a6"}),"返回"]}),Object(s.b)("div",{className:"SignFlow-settingTitle",children:"设置用户名和密码"}),Object(s.b)(L.a,{name:"fullname",placeholder:"用户名",onChange:d("fullname"),manualValidateError:r}),Object(s.b)(z.a,{onChange:d("password"),defaultValue:i,placeholderPrefix:"8 位数字或字母",defaultType:"text",manualValidateError:o}),Object(s.b)(E.c,{type:"submit",className:"SignFlow-submitButton",preset:"primary",color:"blue",disabled:c,children:"进入知乎"})]},"setting")},qe=function(e){var t=e.type,n=e.smsInputInterceptTime,a=e.digitsServerError,r=e.smsType,i=e.reStartTime,o=e.passwordServerError,c=e.password,l=Object(u.useContext)(Fe),d=l.handleSendDigits,h=l.setState,p=Object(Pe.c)((function(){h({smsBackUpDisplay:!0})})),f=Object(Pe.c)((function(e){return h({digits:e})})),g=Object(Pe.c)((function(e){return h({password:e})}));return Object(s.c)(s.a,{children:["digits"===t&&Object(s.b)(s.a,{children:Object(s.b)(x,{countDownEvent:d,countDownEndEvent:p,interceptTime:n,manualValidateError:a,smsType:r,reStartTime:i,onChange:f})}),"password"===t&&Object(s.b)(s.a,{children:Object(s.b)(z.a,{onChange:g,manualValidateError:o,defaultValue:c})})]})},He=function(e){var t=e.smsBackUpName,n=e.smsBackUpDisplay,a=e.isOverSea,r=e.smsType,i=e.type,o=Object(u.useContext)(Fe),c=o.handleChangeType,l=o.setState,d=Object(Pe.c)((function(){f.a.trackEvent(event.currentTarget,{id:4947}),f.a.trackEvent(void 0,{action:"Click",element:"Button",element_name:"ResetPassword"}),window.open("".concat(y.E,"/account/password_reset"),"_blank")})),h=Object(Pe.c)((function(e){f.a.trackEvent(e.currentTarget,{id:4941}),l({smsType:"text"===r?"voice":"text",smsBackUpName:"text"===r?"短信":"语音",reStartTime:Date.now()})}));return Object(s.c)("div",{className:"Login-options",children:[Object(s.b)(E.c,{preset:"plain",className:"Login-switchType",onClick:function(){"digits"!==i&&c(a?"email":"oversea")},children:"digits"!==i&&(a?"邮箱帐号登录":"海外手机号登录")}),Object(s.b)(E.c,{preset:"plain",className:"Login-cannotLogin",onClick:"digits"===i?h:d,children:"digits"===i?n&&"接收".concat(t,"验证码"):"忘记密码？"})]})},Je=function(e){var t=e.type,n=e.submitDisabled;return Object(s.c)(s.a,{children:[Object(s.c)(E.c,{type:"submit",className:"SignFlow-submitButton",preset:"primary",color:"blue",disabled:n,children:["password"===t?"":"注册/","登录"]}),Object(s.b)("div",{className:"SignContainer-tip",children:Object(s.b)("div",{children:Object(s.c)("div",{children:["未注册手机验证后自动登录，注册即代表同意",Object(s.b)("a",{href:"https://www.zhihu.com/term/zhihu-terms",children:"《知乎协议》"}),Object(s.b)("a",{href:"https://www.zhihu.com/term/privacy",children:"《隐私保护指引》"})]})})})]})},We=n(982),Ke=n(107),Ye=n(38),Ze=n.n(Ye),Ge=n(1279);function _e(e,t){var n=e.onReady,a=e.onVerify,r=e.onClose,i=Object(C.useSelector)((function(e){return e.captcha})).v2,o=Object(u.useRef)(),c=Object(u.useRef)(),l=Object(u.useState)("init"),d=Object(ue.a)(l,2),h=d[0],p=d[1];Object(u.useImperativeHandle)(t,(function(){return{get required(){return Boolean(i)},get ready(){return Boolean(c.current)},get type(){var e;return(null===(e=c.current)||void 0===e?void 0:e.type)||"vendor"},show:function(){var e;Ze.a.increment("captchaV2.show.count"),null===(e=c.current)||void 0===e||e.show()},close:function(){var e;return null===(e=c.current)||void 0===e?void 0:e.close()},refresh:function(){var e;return null===(e=c.current)||void 0===e?void 0:e.refresh()}}}));var f=Object(Pe.c)((function(e){var t;if(null===(t=e.script)||void 0===t?void 0:t.length){p("loading");var i=e.script.map((function(e){return function(){return Object(Ke.loadScript)(e)}}));Object(Ge.b)(i).then((function(){return p("mount"),window.ZS_CAP.init({element:o.current,callback:function(e){null==a||a(e)},onClose:r})})).then((function(e){c.current=e,p("ready"),null==n||n()})).catch((function(e){var t;return null===(t=window.Raven)||void 0===t?void 0:t.captureException(e)}))}else p("bypass")}));return Object(u.useEffect)((function(){i&&"init"===h&&f(i)}),[i,h,f]),i?Object(s.b)("div",{ref:o}):null}var Xe=l.a.memo(l.a.forwardRef(_e)),$e=function(e){var t=e.type,n=e.captchaV2,a=Object(C.useDispatch)();return Object(Pe.c)((function(){"qrcode"!==t&&(n&&a(Object(j.h)()),a(Object(j.d)("captcha_sign_in")))}))},et=function(e){var t=e.type,n=e.captchaV2Ref,a=e.onVerify,r=Object(C.useDispatch)(),i=Object(u.useContext)(Fe),o=i.continueActionRef,c=i.captchaV2,l=$e({type:t,captchaV2:c});Object(u.useEffect)((function(){l()}),[l]);return Object(s.b)(Xe,{ref:n,onVerify:function(e){if(e instanceof Error)return r(Object(_.h)(e.message||"验证失败","red"));if(!(null==e?void 0:e.type)||!(null==e?void 0:e.result))return r(Object(_.h)("错误的验证方式","red"));var t=e.result;r(Object(j.g)(JSON.stringify(t),!0,"captcha_sign_in")).then((function(e){var t,n=e.payload;(null==n?void 0:n.success)&&(null==a||a({result:"success"}),o&&(null===(t=o.current)||void 0===t||t.call(o)))})).catch((function(e){if(null==a||a({result:"fail"}),120001!==e.payload.code)throw r(Object(_.h)(Object(We.b)(e),"red")),e;r(Object(_.h)("页面已过期，请刷新页面重试","red"))})).finally((function(){o&&(o.current=null)}))},onClose:function(){var e;return null===(e=n.current)||void 0===e?void 0:e.refresh()}})},tt=function(e){var t=e.props,n=e.setState,a=e.state,r=t.onChangeType,i=t.type,o=t.captchaV2,c=Object(C.useDispatch)(),s=a.username,u=$e({props:t});return Object(Pe.c)((function(e){c(Object(G.f)()),r(e),"qrcode"!==e&&"password"!==e||f.a.trackEvent(null,{action:"Click",name:"qrcode"===e?"使用二维码登录":"使用密码登录"},{account:{type:"Zhihu"}}),"qrcode"!==e&&(n({username:"password"===i&&Object(se.a)(s)?"":s,smsBackUpDisplay:!0}),o||u())}))},nt=function(e){var t=e.loginConfirmError,n=e.sendDigitsError,a=e.registerValidateErrors,r=Object(C.useDispatch)(),i=t||{},o=i.username,c=i.password,s=i.digits,u=i.captcha,l=i.undefined,d=i.validateDigitsError,h=a||{},p=h.fullname,f=(p=void 0===p?{}:p).message,g=h.password,m=(g=void 0===g?{}:g).message,b=n||{},v=b.username,A=b.undefined;return(l||A)&&r(Object(_.h)(l||A,"red")),{usernameServerError:v||o,passwordServerError:c||m,digitsServerError:s||d,captchaServerError:u,fullnameError:f}},at=function(e){var t=e.setState,n=Object(C.useDispatch)();return Object(Pe.c)((function(e,a){n(Object(G.f)()),t(Object(m.a)({},e,a))}))},rt=function(e){var t=e.state,n=t.selectedCountry.code,a=t.username;return Object(Pe.c)((function(){return"+86"!==n||/^\d{11}$/.test(a)}))},it=function(e){var t=e.props,n=e.setState,a=e.runBeforeResetValidateResult,r=e.runBeforeCheckCaptcha,i=e.testPhoneNo,o=e.continueActionRef,c=e.selectedCountry,s=e.captcha,u=e.customErrorInputMap,l=e.username,d=t.type,h=t.isOverSea,p=t.nextUrl,g=Object(C.useDispatch)();return Object(Pe.c)((function(e){f.a.trackEvent(void 0,{id:4948}),a((function(){if("digits"!==d&&!h||i()){var t=function(){var t=Object(A.d)(p),n=t.utm_source,a=t.utm_medium,r=Object.assign({},e,{username:he(e.username,c.code).value,captcha:s,utmSource:n,refSource:a});g(Object(G.h)(te(d,r)))};o.current=t,r().then((function(e){e&&t()})).finally((function(){return n({submitDisabled:!1})}))}else n({customErrorInputMap:Object.assign({},u,{username:l?"请输入正确的手机号":"请输入手机号"}),smsInputInterceptTime:Date.now()})}))}))},ot=function(e){var t=e.customErrorInputMap,n=e.smsType,a=e.selectedCountry.code,r=e.username,i=e.testPhoneNo,o=e.captchaV2Ref,c=e.runBeforeResetValidateResult,s=e.setState,u=e.captchaNeeded,l=e.continueActionRef,d=Object(C.useDispatch)();return Object(Pe.c)((function(e,h){return c((function(){var e;if(i()){var c=he(r,a).value,p=function(){d(Object(G.j)({username:c,smsType:n,type:"login"})),s({smsBackUpDisplay:!1})};if(!r||u){if(u&&(null===(e=o.current)||void 0===e?void 0:e.required)){o.current.show();return l.current=function(){p(),h()},!1}s({customErrorInputMap:Object.assign({},t,{username:r?"":"请输入手机号"})})}else p()}else s({customErrorInputMap:Object.assign({},t,{username:r?"请输入正确的手机号":"请输入手机号"}),smsInputInterceptTime:Date.now()})}),!u)}))},ct={username:null,password:null,captcha:null,digits:null},st=function(e){var t=e.setState,n=Object(C.useDispatch)();return Object(Pe.c)((function(e,a){return n(Object(G.f)()),t({customErrorInputMap:Object.assign({},ct),validationResult:{needsRefresh:!1,timestamp:Date.now()}},e),a}))},ut=function(e){var t=e.props,n=e.captchaV2Ref,a=t.captchaValidated,r=t.captchaNeeded;return Object(Pe.c)((function(){var e;if(!a&&r&&(null===(e=n.current)||void 0===e?void 0:e.required))return n.current.show(),Promise.resolve(!1);return Promise.resolve(!0)}))},lt=function(e){var t=e.registerConfirmSucceeded,n=e.loginConfirmSucceeded,a=e.sendDigitsError,r=e.nextUrl,i=e.username,o=e.isInSignPage,c=e.loginConfirmError,s=e.captchaValidationMessage,l=e.setState,d=e.loginUnregisteredError,h=e.loginBindWechatError,p=e.type,f=Object(C.useDispatch)();Object(u.useEffect)((function(){!c||d||h||(f(Object(j.i)(p)),f(Object(j.d)()))}),[c,d,h,l,f,p]),Object(u.useEffect)((function(){if(s){var e=s?{smsInputInterceptTime:Date.now()}:{};l(Object.assign({captchaValidated:!1,captchaNeeded:!0},e))}}),[s,l]),Object(u.useEffect)((function(){(n||t)&&(Object(me.b)(i),r?location.href=r:o?location.href="/":location.reload())}),[n,t]),Object(u.useEffect)((function(){if(a||!1===n){var e=a?{smsInputInterceptTime:Date.now()}:{};l(Object.assign({},e,{captchaValidated:!1,captchaNeeded:!0}))}}),[a,n]),Object(u.useEffect)((function(){(s||a&&null===c)&&l({smsBackUpDisplay:!0})}),[s,a])},dt="UPDATE_STATE",ht=function(e){return{smsType:"text",smsBackUpName:"语音",smsBackUpDisplay:!0,reStartTime:-1,supportedCountriesShown:!1,selectedCountry:e.selectedCountry,username:e.username,password:e.password,fullname:"",customErrorInputMap:Object.assign({},ct),submitDisabled:!1}},pt=function(e,t){var n=t.type,a=t.callback;if(n===dt){var r=t.payload;return a&&a(e),Object.assign({},e,r)}return e},ft=function(e){var t=e.props,n=e.captchaV2Ref,a=e.continueActionRef,r=e.setState,i=e.selectedCountry.code,o=e.username,c=e.fullname,s=e.digits,u=e.password,l=Object(C.useDispatch)(),d=ut({props:t,captchaV2Ref:n});return Object(Pe.c)((function(){var e=function(){l(Object(O.f)({source:"com.zhihu.web",registerType:"phone_digits",phoneNo:"".concat(i).concat(o),fullname:c,digits:s,password:u}))};a&&(a.current=e),r({submitDisabled:!0}),d().then((function(t){return t&&e()})).finally((function(){return r({submitDisabled:!1})}))}))},gt=function(e){var t=e.isInSignPage,n=e.type,a=e.isOversea,r=e.needSMSIdentify,i=e.captchaV2,o=e.registerConfirmSucceeded,c=e.loginConfirmSucceeded,l=e.nextUrl,d=e.captchaNeeded,h=e.loginUnregisteredError,p=e.loginConfirmError,f=e.captchaValidationMessage,g=Object(C.useDispatch)().dispatch,m=Object(u.useReducer)(pt,e,ht),b=Object(ue.a)(m,2),v=b[0],A=b[1],E=v.selectedCountry,S=v.username,w=v.supportedCountriesShown,y=v.customErrorInputMap,O=v.smsInputInterceptTime,j=v.smsType,B=v.reStartTime,R=v.password,k=v.smsBackUpDisplay,T=v.smsBackUpName,N=v.submitDisabled,Q=v.captcha,D=v.fullname,P=v.digits,M=Object(u.useRef)(null),V=Object(u.useRef)(null),U=Object(u.useRef)(null),F=Object(Pe.c)((function(e,t){return A({type:dt,payload:e,callback:t})})),x=tt({props:e,state:v,setState:F,rootRef:U}),z=nt(e),L=z.usernameServerError,q=z.digitsServerError,H=z.passwordServerError,J=at({setState:F}),W=rt({state:v}),K=st({setState:F}),Y=ot({customErrorInputMap:y,smsType:j,selectedCountry:E,username:S,runBeforeResetValidateResult:K,testPhoneNo:W,setState:F,captchaNeeded:d,captchaV2Ref:V,continueActionRef:M}),Z=ut({props:e,captchaV2Ref:V}),_=it({props:e,selectedCountry:E,captcha:Q,setState:F,runBeforeResetValidateResult:K,runBeforeCheckCaptcha:Z,testPhoneNo:W,continueActionRef:M,customErrorInputMap:y,username:S});lt({registerConfirmSucceeded:o,loginConfirmSucceeded:c,nextUrl:l,username:S,isInSignPage:t,loginConfirmError:p,captchaValidationMessage:f,setState:F,loginUnregisteredError:h});var X=ft({props:e,captchaV2Ref:V,continueActionRef:M,setState:F,selectedCountry:E,username:S,fullname:D,digits:P,password:R}),$=null;if("qrcode"===n)$=Object(s.b)(Be,{ref:U,isInSignPage:t,className:"SignInQrcode",onChangeType:function(){return x("password")}});else{if(r)return Object(s.b)(de,{ref:U,onBack:function(){return g(Object(G.f)())},phoneNo:"".concat(E.code).concat(S)});$=h&&"digits"==n?Object(s.b)(Le,{handleRegister:X,setState:F}):Object(s.c)(I.b,{className:"SignFlow Login-content",onSubmit:_,children:[Object(s.b)(xe,{type:n}),Object(s.b)(ze,{type:n,isOversea:a,supportedCountriesShown:w,selectedCountry:E,username:S,usernameServerError:L,customErrorInputMap:y}),Object(s.b)(qe,{type:n,smsInputInterceptTime:O,digitsServerError:q,smsType:j,reStartTime:B,passwordServerError:H,password:R}),Object(s.b)(He,{type:n,isOverSea:a,smsBackUpName:T,smsBackUpDisplay:k,smsType:j}),Object(s.b)(et,{type:n,captchaV2Ref:V}),Object(s.b)(Je,{submitDisabled:N,type:n})]})}return Object(s.b)(Ue,{handleChangeType:x,setState:F,dispatch:A,handleChange:J,testPhoneNo:W,handleSendDigits:Y,continueActionRef:M,captchaNeeded:d,captchaV2:i,children:$})};gt.propTypes={validateAndLogin:Q.a.func,resetLoginValidateResult:Q.a.func,validateSendDigits:Q.a.func,loginConfirmSucceeded:Q.a.bool,loginConfirmError:Q.a.object,sendDigitsError:Q.a.object,captchaValidationMessage:Q.a.string,captchaNeeded:Q.a.bool,selectedCountry:Q.a.object,username:Q.a.string,password:Q.a.string,type:Q.a.oneOf(["password","digits","qrcode"]),onChangeType:Q.a.func,isInSignPage:Q.a.bool},gt.defaultProps={selectedCountry:{name:"中国",code:"+86"},username:"",password:""};var mt=Object(C.connect)(Me)(gt),bt=n(439),vt=n(202);function Ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var At=function(e){Object(i.a)(n,e);var t=Ct(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={type:e.props.showQrcodeFirst?"qrcode":"digits",isOversea:!1,passwordType:"email"},e.handleSwitchLoginType=function(t){"email"!==t&&"oversea"!==t?e.setState({type:t}):e.setState({type:"password",isOversea:"oversea"===t,passwordType:t})},e}return Object(r.a)(n,[{key:"renderNotification",value:function(){var e=this.props,t=e.notification,n=e.account,a=n.isAppealed,r=n.spamLevel,i=a||r?y.J:y.I,o=null;return o=6===r?Object.assign({},t,{theme:"red"}):t,Object(s.b)(vt.a,{notification:o.global,delay:i,className:"AppHeader-notification"})}},{key:"render",value:function(){var e=this.props,t=e.nextUrl,n=e.isInSignPage,a=e.useCaptchaV2,r=e.passwordType,i=this.state,o=i.type,c=i.isOversea;return Object(s.c)(s.a,{children:[a?Object(s.b)(mt,{type:o,isInSignPage:n,isOversea:c,onChangeType:this.handleSwitchLoginType,nextUrl:t}):Object(s.b)(De,{type:o,isInSignPage:n,passwordType:r,onChangeType:this.handleSwitchLoginType,nextUrl:t}),this.renderNotification()]})}}]),n}(u.Component);At.propTypes={nextUrl:Q.a.string,isInSignPage:Q.a.bool};var Et=Object(v.compose)(oe.withRouter,Object(C.connect)((function(e,t){return{showQrcodeFirst:t.showQrcodeFirst||t.isInSignPage&&["1","2","3"].includes(Object(ce.a)(e,"web_login")),notification:e.notification,account:e.account,useCaptchaV2:Object(bt.a)(e)}})))(At),St=n(1259),wt=n(1446),yt=n(1260),Ot=n(354);function jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var It="/oauth/account_callback",Bt={qqconn:"/oauth/redirect/login/qqconn?next=",sina:"/oauth/redirect/login/sina?next=",wechat:"/oauth/redirect/login/wechat?next="};function Rt(e){return"sina"!==e||!/WindowsWechat/.test(navigator.userAgent)}var kt=function(e){Object(i.a)(n,e);var t=jt(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).accountCallback=function(t){var n=e.props,a=n.onRegister,r=n.nextUrl,i=t.login,o=t.type,c=t.fullname;i?(Object(me.b)(e.clickedServiceName),e.handleLogSocialLoginSuccess(),r?location.href=r:location.reload()):a({bySocial:!0,socialType:o,fullname:c})},e.handleBuildSocialAuthLink=function(t){e.clickedServiceName=t,e.handleLogSingleSocialButtonClick(t);var n=Bt[t],a=Object(A.d)(),r=a.utm_source,i=a.utm_medium;Rt(t)?(e.ready(),window.open("https://www.zhihu.com".concat(n).concat(It).concat(r?"&utm_source=".concat(r):"","&ref_source=").concat(i),"_blank","top=200,left=400,width=600,height=550,directories=no,menubar=no,toolbar=no")):location.href="https://www.zhihu.com".concat(n).concat(It,"&from=").concat(encodeURIComponent(e.parseNextInfoFromUrl()))},e.handleEntranceButtonClick=function(t){e.props.onEntranceButtonClick&&e.props.onEntranceButtonClick(t),e.handleLogSocialLogin(),e.setState((function(e){return{socialButtonExpanded:!e.socialButtonExpanded}}))},e.parseNextInfoFromUrl=function(){var t=e.props.router.location.query.next,n="/";if(t)try{n=decodeURIComponent(t)}catch(e){n=unescape(t)}return n},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){if(document.referrer.startsWith("https://www.zhihu.com/oauth/callback/sina")){var e=Z.a.get("atoken"),t=Z.a.get("accountcallback");if(e&&t){var n=JSON.parse(decodeURIComponent(t));if(!n)return;var a=n.fullname,r=n.type;(0,this.props.onRegister)({fullname:a,socialType:r})}}}},{key:"componentWillUnmount",value:function(){this.unready()}},{key:"ready",value:function(){window.NWEB={accountCallback:this.accountCallback},this.domain=document.domain,document.domain="zhihu.com"}},{key:"unready",value:function(){if(window.NWEB&&"www.zhihu.com"===location.host){try{document.domain=this.domain}catch(e){}delete window.NWEB}}},{key:"handleLogSocialLogin",value:function(){f.a.trackEvent(this,{action:"Click",element:"Button",element_name:"SNSSignIn"})}},{key:"handleLogSingleSocialButtonClick",value:function(e){fe(this,"SignIn",{type:pe[e]})}},{key:"handleLogSocialLoginSuccess",value:function(){ge(this,"SignIn",this.clickedServiceName)}},{key:"render",value:function(){var e=this;return Object(s.c)("div",{className:"Login-socialLogin",children:[Object(s.b)("span",{children:"社交帐号登录"}),Object(s.c)("span",{className:"Login-socialButtonGroup",children:[Object(s.c)(E.c,{className:"Login-socialButton",preset:"plain",onClick:function(){return e.handleBuildSocialAuthLink("wechat")},children:[Object(s.b)(St.a,{className:"Login-socialIcon",fill:"#60c84d",size:20}),"微信"]}),Object(s.c)(E.c,{className:"Login-socialButton",preset:"plain",onClick:function(){return e.handleBuildSocialAuthLink("qqconn")},children:[Object(s.b)(wt.a,{className:"Login-socialIcon",fill:"#50c8fd",size:20}),"QQ"]}),Object(s.c)(E.c,{className:"Login-socialButton",preset:"plain",onClick:function(){return e.handleBuildSocialAuthLink("sina")},children:[Object(s.b)(yt.a,{className:"Login-socialIcon",fill:"#fb6622",size:20}),"微博"]})]})]})}}]),n}(u.Component);kt.propTypes={onRegister:Q.a.func.isRequired,onEntranceButtonClick:Q.a.func};Object(oe.withRouter)(kt);function Tt(e){var t=Object(Ot.b)();return/bux/.test(t.origin)?null:Object(s.b)(kt,Object.assign({},e))}var Nt=n(1513),Qt=n(1447),Dt=n.n(Qt),Pt=function(e){var t=e.isQRCodeShown,n=void 0!==t&&t,a=e.onQRCodeLinkClick,r=e.zaClickId,i=Object(T.a)(e,["isQRCodeShown","onQRCodeLinkClick","zaClickId"]);return Object(s.c)(p.d,Object.assign({px:"24px",color:"GBL01A",width:"400px",height:"60px",alignItems:"center"},i,{children:[Object(s.b)(p.a,{flex:"1",children:Object(s.c)(p.g,{href:"/org/signup",color:"inherit","data-za-detail-view-id":r,children:[Object(s.b)(Nt.a,{size:26,css:{marginRight:".5em"},center:!0}),"开通机构号"]})}),Object(s.b)(p.a,{height:"20px",width:"1px",bg:"GBK09C"}),Object(s.b)(p.a,{flex:"1",textAlign:"right",children:Object(s.b)(p.b,{bg:"unset",color:"inherit",fontSize:"inherit",fontWeight:"inherit",padding:0,onClick:a,children:n?"关闭二维码":Object(s.c)(s.a,{children:[Object(s.b)(Dt.a,{center:!0,css:{marginRight:".5em"}}),"下载知乎 App"]})})})]}))};n(1278);function Mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var Vt=function(e){Object(i.a)(n,e);var t=Mt(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={showHeader:!0,showQrcode:!1,fullname:"",socialType:""},e.changeSignType=function(t){e.props.onChangeSignType(t),e.handleSetShowHeader(!0)},e.handleSwitchToRegisterClick=function(t){e.props.isInSignPage&&f.a.trackEvent(t.currentTarget,{id:4950}),e.changeSignType("register")},e.handleSwitchToLoginClick=function(t){e.props.isInSignPage&&f.a.trackEvent(t.currentTarget,{id:4944}),e.changeSignType("login")},e.handleSetShowHeader=function(t){e.setState({showHeader:t})},e.handleSocialRegister=function(t){var n=t.fullname,a=t.socialType;e.props.onChangeSignType("register"),e.setState({fullname:n,socialType:a,showHeader:!1})},e.handleResetRegister=function(){e.props.onChangeSignType("login"),e.setState({fullname:"",socialType:"",showHeader:!0})},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.nextUrl;e.isLogin&&(location.href=t||"/")}},{key:"render",value:function(){var e=this,t=this.state,n=t.fullname,a=t.socialType,r=t.showQrcode,i=this.props,o=i.nextUrl,c=i.isInSignPage,u=i.signType,l=i.showQrcodeFirst,d=c?p.c:p.a;return Object(s.c)(d,{bg:"background",width:400,css:{overflow:"hidden"},children:["login"===u?Object(s.b)("div",{className:"SignContainer-content",children:Object(s.c)("div",{className:"SignContainer-inner",children:[Object(s.b)(Et,{showQrcodeFirst:l,nextUrl:o,isInSignPage:c}),Object(s.b)("div",{className:h()("SignFlowQRImage",{"SignFlowQRImage--isHidden":!r}),children:Object(s.b)("div",{})})]})}):Object(s.b)(ie,{socialType:a,nextUrl:o,defaultFullname:n,onResetRegister:this.handleResetRegister}),Object(s.b)(p.a,{mx:"24px",sx:{borderTop:"1px solid",borderColor:"GBK09A"}}),Object(s.b)(Tt,{onRegister:this.handleSocialRegister}),Object(s.b)(Pt,{zaClickId:c?4943:8270,isQRCodeShown:r,onQRCodeLinkClick:function(t){e.setState({showQrcode:!r}),c?r&&f.a.trackEvent(t.currentTarget,{id:4945}):f.a.trackEvent(t.currentTarget,{id:r?8272:8271})},bg:"GBK10A"})]})}}]),n}(u.Component);t.a=Object(g.b)()(Vt)},1513:function(e,t,n){"use strict";var a=n(2),r=n.n(a),i=n(17),o=function(e){return r.a.createElement(i.a,e,r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("path",{fill:"#0F88EB",d:"M2.64 13.39c1.068.895 1.808 2.733 1.66 4.113l.022-.196c-.147 1.384.856 2.4 2.24 2.278l-.198.016c1.387-.122 3.21.655 4.083 1.734l-.125-.154c.876 1.084 2.304 1.092 3.195.027l-.127.152c.895-1.068 2.733-1.808 4.113-1.66l-.198-.022c1.386.147 2.402-.856 2.279-2.238l.017.197c-.122-1.388.655-3.212 1.734-4.084l-.154.125c1.083-.876 1.092-2.304.027-3.195l.152.127c-1.068-.895-1.808-2.732-1.66-4.113l-.022.198c.147-1.386-.856-2.4-2.24-2.279l.198-.017c-1.387.123-3.21-.654-4.083-1.733l.125.153c-.876-1.083-2.304-1.092-3.195-.027l.127-.152c-.895 1.068-2.733 1.808-4.113 1.662l.198.02c-1.386-.147-2.4.857-2.279 2.24L4.4 6.363c.122 1.387-.655 3.21-1.734 4.084l.154-.126c-1.083.878-1.092 2.304-.027 3.195l-.152-.127z"}),r.a.createElement("path",{fill:"#FFF",d:"M9.78 15.728l-2.633-2.999s-.458-.705.242-1.362c.7-.657 1.328-.219 1.328-.219l1.953 2.132 4.696-4.931s.663-.348 1.299.198c.636.545.27 1.382.27 1.382s-3.466 3.858-5.376 5.782c-.98.93-1.778.017-1.778.017z"})))};o.defaultProps={name:"BadgeCert"},t.a=o},2411:function(e,t,n){"use strict";n.r(t);var a=n(8),r=n(11),i=n(9),o=n(10),c=n(4),s=n(1),u=n(3),l=n.n(u),d=n(2),h=n(18),p=n(21),f=n(212),g=n(231),m=n(0),b=n(25),v=n(158),C=n(23),A=n(906),E=n(1068),S=n(802),w=n(5),y=n(27),O=n(1310),j=n(1277),I=n(1018);function B(){var e=Object(S.a)(["","s 后可重发"]);return B=function(){return e},e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var k=function(e){Object(i.a)(n,e);var t=R(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.countDownEvent,n=e.startAtOnce,a=e.interceptTime,r=e.resetText,i=e.manualValidateError,o=e.onChange,c=e.validations,u=e.countDownEndEvent,l=e.reStartTime,d=e.isIOS,h=Object(y.a)(e,["countDownEvent","startAtOnce","interceptTime","resetText","manualValidateError","onChange","validations","countDownEndEvent","reStartTime","isIOS"]);return Object(s.c)("div",{className:"SignFlow SignFlow-smsBindPhoneInputContainer",children:[Object(s.b)(I.a,Object.assign({name:"digits",className:"SignFlow-smsBindPhoneInput",type:d?"tel":"number",errorMessageClassName:"SignFlow-smsBindPhoneInputErrorMask",placeholder:"输入 6 位验证码",manualValidateError:i,onChange:o,validations:[{type:"required",message:"请填写验证码",className:"SignFlow-smsInputBindPhoneRequiredErrorMask"}].concat(Object(w.a)(c||[]))},h)),Object(s.b)(O.a,{className:"SignFlow-smsBindPhoneInputButton",preset:"plain",initialText:"发送验证码",resetText:r,countingText:Object(j.a)(B(),"count"),startAtOnce:n,event:t,countDownEndEvent:u,interceptTime:a,reStartTime:l})]})}}]),n}(d.Component);k.propTypes={countDownEvent:l.a.func.isRequired,startAtOnce:l.a.bool,interceptTime:l.a.number,resetText:l.a.string,manualValidateError:l.a.string},k.defaultProps={startAtOnce:!1,resetText:"重发验证码"};var T=Object(p.connect)((function(e){return{isIOS:e.env.userAgent.iOS}}))(k),N=n(19);function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var D=function(e){Object(i.a)(n,e);var t=Q(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={selectedCountry:{code:"+86",name:"中国"},phoneNo:null,smsInputInterceptTime:-1,manualError:null,showFooter:!1,sendValidationCodeButtonText:"发送验证码",identifyingCodeError:null},e.testPhoneNo=function(){var t=e.state,n=t.selectedCountry.code,a=t.phoneNo;return"+86"!==n||/^\d{11}$/.test(a)},e.handleChange=function(t){return function(n){e.setState(Object(m.a)({},t,n))}},e.handleSendDigits=function(t){var n=e.props.requestPhoneVerificationCode,a=e.state,r=a.selectedCountry.code,i=a.phoneNo,o=a.manualError;if(C.a.trackEvent(t.target,{action:"GetCaptcha"}),e.testPhoneNo())return n("".concat(r).concat(i)).then((function(){e.setState({manualError:null})})).catch((function(t){var n=t.payload,a=(n=void 0===n?{}:n).message;return e.setState({manualError:a,smsInputInterceptTime:Date.now()})}));return e.setState({manualError:"请输入正确的手机号"===o?" ".concat("请输入正确的手机号"):"请输入正确的手机号",smsInputInterceptTime:Date.now()})},e.handleSubmit=function(t){var n=t.phoneNo,a=t.digits,r=e.props,i=r.updatePhoneNumber,o=r.onSuccess,c=r.onNeedUnbind,s=e.state,u=s.selectedCountry.code,l=s.identifyingCodeError;i("".concat(u).concat(n),a).then((function(e){var t=e.payload,a=t.data;if(t.success)return o();var r=a.bindedAccountFullname,i=a.requestAccountFullname;return c({phoneNumber:n,bindName:r,requiredName:i})})).catch((function(t){var n=t.payload,a=(n=void 0===n?{}:n).code,r=n.message;a===N.B&&e.setState({identifyingCodeError:l===r?" ".concat(r):r})}))},e.handleZaOK=function(e){C.a.trackEvent(e.target,{action:"Ok"})},e.renderContent=function(){var t=e.state,n=t.smsInputInterceptTime,a=t.manualError,r=t.sendValidationCodeButtonText,i=t.identifyingCodeError;return Object(s.b)("div",{ref:function(t){e.container=t},children:Object(s.c)(A.b,{className:"SignFlow BindPhoneForm",onSubmit:e.handleSubmit,children:[!1,Object(s.b)(E.a,{type:"register",supportedCountriesShown:!0,manualValidateError:a,onSelect:e.handleChange("selectedCountry"),onChange:e.handleChange("phoneNo")}),Object(s.b)(T,{resetText:r,interceptTime:n,countDownEvent:e.handleSendDigits,manualValidateError:i},"sms-input"),Object(s.b)("div",{className:"BindPhone-helpWrapper",children:Object(s.b)(b.c,{className:"BindPhone-helpText",preset:"link",onClick:function(){e.setState({showFooter:!0})},children:"需要帮助？"})}),Object(s.b)(b.c,{css:{display:"block",width:"220px",margin:"55px auto 0"},preset:"primary",color:"blue",type:"submit",onClick:e.handleZaOK,children:"确认"})]})})},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){C.a.setModule(this.container,{module:"BindPhoneForm"}),C.a.trackCardShow(this.container)}},{key:"render",value:function(){var e=this.props.onClose,t=this.state.showFooter;return Object(s.b)(v.b,{title:"设置手机号",subtitle:"绑定手机后，你就可以使用知乎的提问、回答、评论等功能。",footer:t?"如需要帮助，请联系 i@zhihu.com，我们会尽快帮你解决":null,onClose:e,size:"default",children:this.renderContent()})}}]),n}(d.Component);D.propTypes={requestPhoneVerificationCode:l.a.func.isRequired,updatePhoneNumber:l.a.func.isRequired,onClose:l.a.func.isRequired,onSuccess:l.a.func.isRequired,onNeedUnbind:l.a.func.isRequired};var P=n(110);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var V=function(e){Object(i.a)(n,e);var t=M(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).zaKnowMore=function(e){C.a.trackEvent(e.target,{action:"OpenUrl",name:"了解更多"})},e.toBindPhone=function(t){var n=e.props.onBindPhone;C.a.trackEvent(t.target,{action:"OpenUrl",name:"去绑定手机"}),n()},e.handleClose=function(t){var n=e.props,a=n.onClose,r=n.config.canWrite;C.a.trackEvent(t.target,{action:"Cancel",name:r?"暂不绑定":"取消"}),a()},e.renderContent=function(){var t=e.props.config,n=t.tip,a=t.canWrite;return Object(s.c)("div",{ref:function(t){e.container=t},children:[Object(s.c)("p",{children:[n,Object(s.b)(P.a,{preset:"link",target:"_blank",href:"https://zhuanlan.zhihu.com/p/27257715",onClick:e.zaKnowMore,children:"了解更多"})]}),Object(s.c)("div",{className:"BindPhone-buttonSection",children:[Object(s.b)(P.a,{className:"BindPhone-button",onClick:e.handleClose,children:a?"暂不绑定":"取消"}),Object(s.b)(b.c,{className:"BindPhone-button",preset:"primary",color:"blue",onClick:e.toBindPhone,children:"去绑定手机"})]})]})},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){C.a.setModule(this.container,{module:"BindPhoneForm"}),C.a.trackCardShow(this.container)}},{key:"render",value:function(){var e=this.props.onClose;return Object(s.b)(v.b,{className:!1,title:"绑定手机",onClose:e,size:"default",children:this.renderContent()})}}]),n}(d.Component);function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}V.propTypes={config:l.a.object,onClose:l.a.func,onBindPhone:l.a.func};var F=function(e){Object(i.a)(n,e);var t=U(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).handleCancel=function(t){var n=e.props.onClose;C.a.trackEvent(t.target,{action:"Cancel",name:"不绑定"}),n()},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){C.a.setModule(this.container,{module:"BindMailForm"}),C.a.trackCardShow(this.container)}},{key:"render",value:function(){var e=this,t=this.props.onClose;return Object(s.b)(v.b,{className:!1,title:"手机号绑定成功",onClose:t,size:"default",children:Object(s.c)("div",{ref:function(t){e.container=t},children:[Object(s.b)("p",{children:"由于你此前绑定的邮箱未经验证，未来请使用手机号登录知乎。"}),Object(s.b)(b.c,{className:"BindPhone-remindLoginWithPhoneButton",onClick:this.handleCancel,preset:"primary",color:"blue",children:"知道了"})]})})}}]),n}(d.Component);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}F.propTypes={onClose:l.a.func};var z=function(e){Object(i.a)(n,e);var t=x(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).handleCancel=function(t){var n=e.props.onCancel;C.a.trackEvent(t.target,{action:"Click",name:"暂不绑定"}),n()},e.handleConfirm=function(t){var n=e.props.onConfirm;C.a.trackEvent(t.target,{action:"Click",name:"确认解绑"}),n()},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){C.a.setModule(this.container,{module:"BindPhoneFailForm"}),C.a.trackCardShow(this.container)}},{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,a=t.phoneNumber,r=t.bindName,i=t.requiredName;return Object(s.b)(v.b,{className:!1,title:"绑定失败",onClose:n,size:"default",children:Object(s.c)("div",{ref:function(t){e.container=t},children:[Object(s.c)("p",{children:["你所输入的手机号 ",a," 已经被绑定到帐号「",r,"」。"]}),!1,Object(s.c)("p",{children:["你可以选择将该手机号从该帐号中解绑，并绑定至当前帐号「",i,"」。"]}),!1,Object(s.b)("p",{children:Object(s.c)("b",{children:["解绑后，你将无法再通过手机号登录原帐号「",r,"」。"]})}),Object(s.c)("div",{className:"BindPhone-buttonSection",children:[Object(s.b)(b.c,{className:"BindPhone-button",onClick:this.handleConfirm,children:"确认解绑"}),Object(s.b)(b.c,{className:"BindPhone-button",preset:"primary",color:"blue",onClick:this.handleCancel,children:"暂不绑定"})]})]})})}}]),n}(d.Component);function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}z.propTypes={onClose:l.a.func.isRequired,onCancel:l.a.func.isRequired,onConfirm:l.a.func.isRequired,phoneNumber:l.a.string.isRequired,bindName:l.a.string.isRequired,requiredName:l.a.string.isRequired};var q=function(e){Object(i.a)(n,e);var t=L(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).handleUnbind=function(t){var n=e.props,a=n.onSuccess,r=n.monopolizePhoneNumber,i=n.showNotification;C.a.trackEvent(t.target,{action:"Click",name:"确认解绑"}),r().then((function(){return i("绑定成功！","white"),a()}))},e.handleCancel=function(t){var n=e.props.onCancel;C.a.trackEvent(t.target,{action:"Click",name:"暂不绑定"}),n()},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){C.a.setModule(this.container,{module:"BindPhoneVerifyForm"}),C.a.trackCardShow(this.container)}},{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,a=t.bindName;return Object(s.b)(v.b,{className:!1,title:"解绑手机",onClose:n,size:"default",children:Object(s.c)("div",{ref:function(t){e.container=t},children:[Object(s.b)("p",{children:Object(s.b)("b",{children:"解绑操作无法撤销。"})}),!1,Object(s.c)("p",{children:["如果你没有其他登录方式，你将无法再使用帐号「",a,"」。"]}),Object(s.c)("div",{className:"BindPhone-buttonSection",children:[Object(s.b)(b.c,{className:"BindPhone-button",onClick:this.handleUnbind,children:"确认解绑"}),Object(s.b)(b.c,{className:"BindPhone-button",preset:"primary",color:"blue",onClick:this.handleCancel,children:"暂不绑定"})]})]})})}}]),n}(d.Component);q.propTypes={onClose:l.a.func.isRequired,onSuccess:l.a.func.isRequired,onCancel:l.a.func.isRequired,bindName:l.a.string.isRequired,showNotification:l.a.func.isRequired,monopolizePhoneNumber:l.a.string.isRequired};var H=n(114),J=n(32),W=n(20);function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var Y=function(e){Object(i.a)(n,e);var t=K(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={},e.handleBindPhoneSuccess=function(){var t=e.props,n=t.needShowLoginWithPhoneNumber,a=t.showNotification,r=t.onToggle;return n?e.goToStep("LOGIN_WITH_PHONE")():(a("绑定成功！","white"),setTimeout((function(){return location.reload()}),2e3),r())},e.handleNeedUnbind=function(t){var n=t.bindName,a=t.phoneNumber,r=t.requiredName;return e.setState({bindName:n,phoneNumber:a,requiredName:r,step:"NEED_UNBIND"})},e.goToStep=function(t){return function(){return e.setState({step:t})}},e.handleCloseWithReload=function(){return location.reload()},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.fillCurrentUserIfNeeded)(["email","isActive"])}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.getUnlockRequest,a=t.hasActiveEmail,r=t.shown,i=t.account,o=i.errorStatus,c=i.challenge,s=document.querySelector(".VerificationDialogModalHeader");if(e.shown&&!r){n();var u="";u=a?"CONFIRM_BIND_PHONE":o&&!s&&c&&c.length?"SAFETY_VERIFICATION":"BIND_PHONE",this.setState({step:u})}}},{key:"render",value:function(){var e=this.props,t=e.shown,n=e.requestPhoneVerificationCode,a=e.updatePhoneNumber,r=e.monopolizePhoneNumber,i=e.showNotification,o=e.config,c=e.account,u=e.unlockTicketByDigits,l=e.requestUnlockTicket,d=e.unlockTicketByPassword,h=e.onToggle,p=this.state,g=p.step,m=p.bindName,b=p.phoneNumber,v=p.requiredName;return t?"CONFIRM_BIND_PHONE"===g?Object(s.b)(V,{onBindPhone:this.goToStep("SAFETY_VERIFICATION"),onClose:h,config:o}):"BIND_PHONE"===g?Object(s.b)(D,{onClose:h,onSuccess:this.handleBindPhoneSuccess,onNeedUnbind:this.handleNeedUnbind,requestPhoneVerificationCode:n,updatePhoneNumber:a}):"LOGIN_WITH_PHONE"===g?Object(s.b)(F,{onClose:this.handleCloseWithReload}):"NEED_UNBIND"===g?Object(s.b)(z,{onClose:h,onCancel:this.goToStep("BIND_PHONE"),onConfirm:this.goToStep("CONFIRM_UNBIND"),bindName:m,phoneNumber:b,requiredName:v}):"CONFIRM_UNBIND"===g?Object(s.b)(q,{onClose:h,onSuccess:this.handleBindPhoneSuccess,onCancel:this.goToStep("BIND_PHONE"),bindName:m,monopolizePhoneNumber:r,showNotification:i}):"SAFETY_VERIFICATION"===g?Object(s.b)(f.a,{isShown:!0,account:c,unlockTicketByDigits:u,requestUnlockTicket:l,unlockTicketByPassword:d,onClose:h,onSuccess:this.goToStep("BIND_PHONE"),zaModuleName:"BindMailForm"}):null:null}}]),n}(d.Component);Y.propTypes={shown:l.a.bool.isRequired,onToggle:l.a.func.isRequired,needShowLoginWithPhoneNumber:l.a.bool.isRequired,config:l.a.object.isRequired,requestPhoneVerificationCode:l.a.func.isRequired,updatePhoneNumber:l.a.func.isRequired,monopolizePhoneNumber:l.a.func.isRequired};t.default=Object(h.compose)(Object(g.b)(),Object(p.connect)((function(e,t){var n=e.account,a=t.currentUser,r=a.isActive,i=a.email;return{account:n,hasActiveEmail:r&&i,needShowLoginWithPhoneNumber:!r&&!!i,config:N.N}}),{requestPhoneVerificationCode:H.l,updatePhoneNumber:H.v,monopolizePhoneNumber:H.i,showNotification:W.h,getUnlockRequest:H.g,unlockTicketByDigits:H.q,requestUnlockTicket:H.m,unlockTicketByPassword:H.r,fillCurrentUserIfNeeded:J.d}))(Y)},761:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return f}));var a=n(27),r=n(8),i=n(11),o=n(9),c=n(10),s=n(4),u=n(1),l=n(2),d=n(70),h=n(1497);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var r=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var f=function(e){Object(o.a)(n,e);var t=p(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={signType:e.props.signType||"login"},e.handleChangeSignType=function(t){e.setState({signType:t})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.showQrcodeFirst,r=Object(a.a)(e,["onClose","showQrcodeFirst"]);return Object(u.b)(d.b,Object.assign({className:"signFlowModal",onClose:t},r,{children:Object(u.b)(h.a,{showQrcodeFirst:n,signType:this.state.signType,onChangeSignType:this.handleChangeSignType})}))}}]),n}(l.Component)},802:function(e,t,n){"use strict";function a(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,"a",(function(){return a}))},880:function(e,t){function n(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}e.exports=n,e.exports.default=n},906:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a=n(27),r=n(0),i=n(5),o=n(8),c=n(11),s=n(9),u=n(10),l=n(4),d=n(1),h=n(3),p=n.n(h),f=n(2),g=n(36),m=n(21),b=n(880),v=n.n(b),C=n(84),A=n.n(C);function E(e,t){return t?e.trim():e}var S={useTrim:!0},w={required:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S,n=t.useTrim;return""!==E(e,n)},maxLength:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S,a=n.useTrim;return E(e,a).length<=t},minLength:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S,a=n.useTrim;return E(e,a).length>=t},pattern:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S,a=n.useTrim;return t.test(E(e,a))}};function y(){return function(e){return function(e){var t=e.contextTypes,n=e.defaultProps,a=Object.assign({},e.prototype);function r(e){for(var t=a[e],n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return"function"==typeof t?t.apply(void 0,r):void 0}return Object.assign(e.prototype,{componentWillMount:function(){var e=this.context.form;e&&(e.attachToForm(this),this.setState({_value:"",_validations:[]}));for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return r.apply(void 0,["componentWillMount"].concat(n))},componentWillUnmount:function(){var e=this.context.form;e&&e.detachFromForm(this);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return r.apply(void 0,["componentWillUnmount"].concat(n))},getValue:function(){var e=(this.state||{})._value;return null==e?"":e},setValue:function(e,t){this.setState({_value:e},(function(){"function"==typeof t&&t()}))},getValidationMessage:function(){var e=this.getValidationMessages();return e&&e[0]},getValidationClassName:function(){var e=(this.state||{})._validations;return e&&e[0]&&e[0].className},getValidationMessages:function(){var e=(this.state||{})._validations;return null==e?void 0:e.map((function(e){var t=e.message;return t?"string"==typeof t?t:t.message||"未知错误":""}))},setValidations:function(e){var t=this;this.setState({_validations:e},(function(){return t.forceUpdate()}))},clearValidations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=this.state||{},a=n._validations;a&&a.length>0&&this.setState(Object.assign({},e,{_validations:[]}),t)},addValidation:function(e){this.setState((function(t){var n=t._validations;return{_validations:[e].concat(Object(i.a)(n||[]))}}))},addManualValidation:function(e){this.addValidation({type:"manual",message:e})},validate:function(){this.context.form.validate(this)}}),Object.assign(e,{contextTypes:Object.assign({},t,{form:p.a.object}),defaultProps:Object.assign({},n,{validations:[]})}),e}(e)}}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(u.a)(this,n)}}var j=function(e){Object(s.a)(n,e);var t=O(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={isValid:!0},e.inputs=[],e.attachToForm=function(t){var n=t.props.name;if(!n||e.inputs.includes(n))throw new Error("form input must specify a unqie name, but current is ".concat(n));e.inputs.push(t)},e.detachFromForm=function(t){var n=e.inputs.indexOf(t);-1!==n&&(e.inputs=[].concat(Object(i.a)(e.inputs.slice(0,n)),Object(i.a)(e.inputs.slice(n+1))))},e.validate=function(e){var t=e.state._value,n=e.props.validations,a=[],r=[];return n?(!Array.isArray(n)&&n.type&&(n=[n]),n.forEach((function(e){var n=e.type,o=e.value,c=e.options,s=w[n];if(!s)throw new Error("no ".concat(n," rules, please define it at Form.validateRules"));var u=s(t,o,c);v()(u)?r=[].concat(Object(i.a)(r),[u.then((function(){}),(function(){a.push(e)}))]):u||(a=[].concat(Object(i.a)(a),[e]))})),Promise.all(r).then((function(){return e.setValidations(a),a}))):a},e.handleSubmit=function(t){t.preventDefault();var n=e.props,a=n.onPreSubmit,i=n.onSubmit,o=n.isWechat;a(),o?new Promise((function(t){var n=e.inputs.find((function(e){return"username"===e.props.name}));n&&!n.state._value&&Object(g.findDOMNode)(n.inputEl).value&&n.handleChange({target:{value:Object(g.findDOMNode)(n.inputEl).value}});var a=e.inputs.find((function(e){return"password"===e.props.name}));a&&!a.state._value&&n&&Object(g.findDOMNode)(n.inputEl).value&&a.handleChange({target:{value:Object(g.findDOMNode)(a.inputEl).value}}),t()})).then((function(){e.validateAll().then((function(t){if(t){var n=e.inputs.reduce((function(e,t){return Object.assign({},e,Object(r.a)({},t.props.name,t.state._value))}),{});i(n)}}))})):e.validateAll().then((function(t){if(t){var n=e.inputs.reduce((function(e,t){return Object.assign({},e,Object(r.a)({},t.props.name,t.state._value))}),{});i(n)}}))},e}return Object(c.a)(n,[{key:"getChildContext",value:function(){return{form:{attachToForm:this.attachToForm,detachFromForm:this.detachFromForm,getValue:this.getValue,setValue:this.setValue,validate:this.validate}}}},{key:"componentDidMount",value:function(){}},{key:"validateAll",value:function(){var e=this,t=this.props,n=t.onValid,a=t.onInvalid,r=[],o=[];return this.inputs.forEach((function(t){var n=e.validate(t);v()(n)?o=[].concat(Object(i.a)(o),[n.then((function(e){r=[].concat(Object(i.a)(r),Object(i.a)(e))}))]):n&&(r=[].concat(Object(i.a)(r),Object(i.a)(n)))})),Promise.all(o).then((function(){var t=0===r.length;return e.setState({isValid:t},(function(){t?n():a(r.map((function(e){return e.message})))})),t}))}},{key:"render",value:function(){var e=A()(this.props,["onValid","onInvalid","onSubmit","onPreSubmit","isWechat","dispatch"]),t=e.children,n=e.onRef,r=Object(a.a)(e,["children","onRef"]);return Object(d.b)("form",Object.assign({noValidate:!0,onSubmit:this.handleSubmit,ref:n},r,{children:t}))}}]),n}(f.Component);j.childContextTypes={form:p.a.object},j.propTypes={onValid:p.a.func,onInvalid:p.a.func,onSubmit:p.a.func,onPreSubmit:p.a.func},j.validateRules=w,j.defaultProps={onValid:function(){},onInvalid:function(){},onSubmit:function(){},onPreSubmit:function(){}};t.b=Object(m.connect)((function(e){return{isWechat:e.env.userAgent.Wechat}}))(j)},982:function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));var a=n(74),r={400:"请求参数有误",401:"用户认证失败",403:"服务已拒绝",404:"资源不存在",405:"请求方式有误",410:"资源已解散",502:"网关错误",503:"服务无响应",504:"网关超时"},i=function(e){var t;return(null==e||null===(t=e.payload)||void 0===t?void 0:t.message)||(null==e?void 0:e.status)&&r[e.status]||"操作失败"};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.a.dispatch("ui/showToast",{icon:"fail",text:i(e)})}}}]);
//# sourceMappingURL=main.signflow.a7da414c2a2b165c5668.js.map